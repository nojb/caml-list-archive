Return-Path: <info@gerd-stolpmann.de>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail3-relais-sop.national.inria.fr (mail3-relais-sop.national.inria.fr [192.134.164.104])
	by sympa.inria.fr (Postfix) with ESMTPS id 16BFF7F0D9
	for <caml-list@sympa.inria.fr>; Tue, 25 Aug 2015 13:10:03 +0200 (CEST)
IronPort-PHdr: 9a23:DOsLOhIoPL3Os9CPYdmcpTZWNBhigK39O0sv0rFitYgUI//xwZ3uMQTl6Ol3ixeRBMOAu6kC1rqd6vqocFdDyKjCmUhKSIZLWR4BhJdetC0bK+nBN3fGKuX3ZTcxBsVIWQwt1Xi6NU9IBJS2PAWK8TWM5DIfUi/yKRBybrysXNWC1ILqh6vrodX6WEZhunmUWftKNhK4rAHc5IE9oLBJDeIP8CbPuWZCYO9MxGlldhq5lhf44dqsrtY4q3wD89pozcNLUL37cqIkVvQYSW1+ayFmrPHs4CJCRwKU+noRVC02kxxEDhLI9lmuZZr7uzDmt+d7ngmbO8H7V70ucTWk9aZiDhHy3nQpLTk8pU7akMA4t75cpAqkrhp5i9rVZo+SHPVzZK+YZs8dQXJEV8BXESBMVNDvJ7ATBvYMaL4L57L2oEED+F7nXVGh
Authentication-Results: mail3-smtp-sop.national.inria.fr; spf=None smtp.pra=info@gerd-stolpmann.de; spf=None smtp.mailfrom=info@gerd-stolpmann.de; spf=None smtp.helo=postmaster@mout.kundenserver.de
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  info@gerd-stolpmann.de) identity=pra;
  client-ip=212.227.126.131;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="info@gerd-stolpmann.de";
  x-conformance=sidf_compatible
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  info@gerd-stolpmann.de) identity=mailfrom;
  client-ip=212.227.126.131;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="info@gerd-stolpmann.de";
  x-conformance=sidf_compatible
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@mout.kundenserver.de) identity=helo;
  client-ip=212.227.126.131;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="postmaster@mout.kundenserver.de";
  x-conformance=sidf_compatible
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: A0DmAQDuS9xVm4N+49Rdg29pv3kGhX8CgTY8EAEBAQEBAQEBEAEBAQEBBgsLCSEuQQWBV4IHAQEEVSQQC0ZXBhMJiCkJx0QBAQEBAQEEAQEBAR6LV4RkJgeCLgxBgTEFhymOC3UCi3uIcAORXIQmbwGCSwEBAQ
X-IPAS-Result: A0DmAQDuS9xVm4N+49Rdg29pv3kGhX8CgTY8EAEBAQEBAQEBEAEBAQEBBgsLCSEuQQWBV4IHAQEEVSQQC0ZXBhMJiCkJx0QBAQEBAQEEAQEBAR6LV4RkJgeCLgxBgTEFhymOC3UCi3uIcAORXIQmbwGCSwEBAQ
X-IronPort-AV: E=Sophos;i="5.15,745,1432591200"; 
   d="asc'?scan'208";a="143732045"
Received: from mout.kundenserver.de ([212.227.126.131])
  by mail3-smtp-sop.national.inria.fr with ESMTP/TLS/DHE-RSA-AES256-GCM-SHA384; 25 Aug 2015 13:10:02 +0200
Received: from office1.lan.sumadev.de ([88.69.138.237]) by
 mrelayeu.kundenserver.de (mreue004) with ESMTPSA (Nemesis) id
 0Ltj2f-1YlTGG1ikP-011Bmk; Tue, 25 Aug 2015 13:10:01 +0200
Received: from [192.168.65.10] (unknown [192.168.65.10])
	by office1.lan.sumadev.de (Postfix) with ESMTPSA id C42AEDC05D;
	Tue, 25 Aug 2015 13:10:00 +0200 (CEST)
Message-ID: <1440500993.3985.2.camel@e130.lan.sumadev.de>
From: Gerd Stolpmann <info@gerd-stolpmann.de>
To: =?ISO-8859-1?Q?S=E9bastien?= Hinderer <Sebastien.Hinderer@inria.fr>
Cc: caml-list@inria.fr
Date: Tue, 25 Aug 2015 13:09:53 +0200
In-Reply-To: <20150824121920.GE1536@pl-59055.rocqadm.inria.fr>
References: 
	<20150823021901.Horde.g_vEwwFL7xNJIFXFf3LPIcu@webmail.in-berlin.de>
	 <20150824121920.GE1536@pl-59055.rocqadm.inria.fr>
Content-Type: multipart/signed; micalg="pgp-sha1"; protocol="application/pgp-signature";
	boundary="=-ZJ0ldaDp6Ho2Da/4Cppt"
X-Mailer: Evolution 3.10.4-0ubuntu2 
Mime-Version: 1.0
X-Provags-ID:  V03:K0:b6txUDSpMs//j8inzBi2PK3t8/ymvK4tqn2vGurVtVHO3np+85u
 +Wh9Hgj0q8qDZWMDVYhtmDF68pccyN41KlMeEFynwc02x5gk8bqJF5XuT/QwNkAFbycLkWW
 Zh0AiFwjiaLjb9a19mkfW3metArj+r2uqFOg2kI9pPcO2SQzhBPLpZLSjgEs4Q3GeSoKH+W
 W+wyFj/O+GVrbE8S/RajQ==
X-UI-Out-Filterresults: notjunk:1;V01:K0:YiojPmEwL5A=:F+ehO5kjwgNM5Kfg6t0Xly
 2G/jRvcKbQAzK/UYbReefHrU+LQQsHIr5Vv1wLzGmMXfk041B8z7XbFLHjbVDStBRdv3vGUIj
 VD9/JIpJiCUkKPxWl27ZnwSN+RnD5kXMe9yvtLqNvyV2yo0Ylqu66CUjZAx810O/sfC/K7ySY
 FdTsUBaehdxYTpI7mjlbLcaiuec0jWqOJQkJg7XsHO3AjtHIGglUldDZgjZ/7rV0g2UUNpBlz
 RDByyT31nT+qiHTsE5dYWIgfU2+WWJj+aDR/8xHJw6vwiW0lfTJwCr3Pf89lvbf63h6HFaDEi
 7/lxR2jKxjW1Z7knnXoAZck6dTdAq/wMasen5yVEu8v07PjrUBwp+r9yHSfV9XjKWTTFhfDtD
 0Bm1Q2dcxJVuyu6HTiiWdm16wonfmLZwwzMelSSRAR762Pymq3/iJMPgOALwvApymBt+eJst9
 UFNoufxyfwwZGNlgLCHg4YfC3EZxDVnd7gGy/PL3JT7o2jGg/oH9U8IY7jQmMoTumsWVJbjHA
 33pms6WBpR4Zvw4TuiAkpd5d/G7wxp4rk+Tk6/A6K6wfHsYVZhyEG5cKqB3FFIciStBWJYt77
 r6wZECZHRthLPuBRugwwMmC3c434R94ywuAimgJ4L2FzudLFfBLUVIPlvUNctrpdWxKo8kCE2
 tWiyOQnZ3lYKtWJLe6zVEcspuuJIuMtb9YYuewt2veVuG3YMU7y9fNKzkYS1XaZVELYQ=
Subject: Re: [Caml-list] Setting Pervasive's stderr to unbuffered as
 default?


--=-ZJ0ldaDp6Ho2Da/4Cppt
Content-Type: text/plain; charset="ISO-8859-15"
Content-Transfer-Encoding: quoted-printable

I cannot follow. Pervasives.stderr is unbuffered; however (see
pervasives.ml):

let print_endline s =3D
  output_string stdout s; output_char stdout '\n'; flush stdout
let print_newline () =3D output_char stdout '\n'; flush stdout

let prerr_endline s =3D
  output_string stderr s; output_char stderr '\n'; flush stderr
let prerr_newline () =3D output_char stderr '\n'; flush stderr

So far I know these are the only functions doing an implicit flush, and
they are doing it for both stdout and stderr.

Gerd


Am Montag, den 24.08.2015, 14:19 +0200 schrieb S=E9bastien Hinderer:
> Hi,
>=20
> Oliver Bandel (2015/08/23 02:19 +0200):
> > Hello,
> >=20
> > stderr on Unix is unbuffered by default.
> >=20
> > In OCaml, all the Channels from Pervasives are buffered by default,
> > and flush-function must be used.
> > This issue is annoying me since ages...
>=20
> [...]
>=20
> I'd also prefer an unbuffered stderr, finding it more intuitive.
>=20
> Thanks for havign mentionned that,
> S=E9bastien.
>=20

--=20
------------------------------------------------------------
Gerd Stolpmann, Darmstadt, Germany    gerd@gerd-stolpmann.de
My OCaml site:          http://www.camlcity.org
Contact details:        http://www.camlcity.org/contact.html
Company homepage:       http://www.gerd-stolpmann.de
------------------------------------------------------------


--=-ZJ0ldaDp6Ho2Da/4Cppt
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: This is a digitally signed message part
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQEcBAABAgAGBQJV3E0BAAoJEAaM4b9ZLB5Ttn8H/RkYSrOiQ34VEZ4T91we6Vj5
/7WOOkiyIjn97JCn6oCP9S5XXuNwhUZ/sGtaA6CQz195qAzrsysvNPvT8GeECWjO
cI0ysixCr+qD9t9/42HljH/FcxVGOIa4dMJfhQKKc6eJ+7hLnqSU3sWNZPgN8Y/W
3Bnku9gxBLF28Vwv9ZxH5pC5lD+GB4wIgAflBDeRjq0hMkE6S01g4PxFbOfyvaoa
syiRgMdP+XMOl+5H0ehOPzeX5NlF8BooT21bED6SH/m8f8Cp9UlyE2kuEzbkeP9U
aPBd9zQMq2uPqCte5QQmv65SnJhtf+tAh6Wn+zynsndh/EHYXRtK5j38JW6aAr0=
=DM34
-----END PGP SIGNATURE-----

--=-ZJ0ldaDp6Ho2Da/4Cppt--

