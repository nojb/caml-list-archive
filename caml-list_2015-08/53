Return-Path: <info@gerd-stolpmann.de>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail3-relais-sop.national.inria.fr (mail3-relais-sop.national.inria.fr [192.134.164.104])
	by sympa.inria.fr (Postfix) with ESMTPS id 7A89E7EEBF
	for <caml-list@sympa.inria.fr>; Wed,  5 Aug 2015 17:36:41 +0200 (CEST)
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  info@gerd-stolpmann.de) identity=pra;
  client-ip=212.227.17.13;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="info@gerd-stolpmann.de";
  x-conformance=sidf_compatible
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  info@gerd-stolpmann.de) identity=mailfrom;
  client-ip=212.227.17.13;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="info@gerd-stolpmann.de";
  x-conformance=sidf_compatible
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@mout.kundenserver.de) identity=helo;
  client-ip=212.227.17.13;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="postmaster@mout.kundenserver.de";
  x-conformance=sidf_compatible
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: A0AMAQDqLMJVnA0R49Rbg29pgyO7aoV9AoFITAEBAQEBARIBAQEBAQYNCQkhLoQkAQEEIzIkEAkCLRUCAlcGEwmIKQmZCZ0bligBAQEBAQEEAQEBAQEdi0+EYyYHCoJfgUMFhxuNZHEClDwDkQqEJW0BgksBAQE
X-IPAS-Result: A0AMAQDqLMJVnA0R49Rbg29pgyO7aoV9AoFITAEBAQEBARIBAQEBAQYNCQkhLoQkAQEEIzIkEAkCLRUCAlcGEwmIKQmZCZ0bligBAQEBAQEEAQEBAQEdi0+EYyYHCoJfgUMFhxuNZHEClDwDkQqEJW0BgksBAQE
X-IronPort-AV: E=Sophos;i="5.15,618,1432591200"; 
   d="asc'?scan'208";a="142108140"
Received: from mout.kundenserver.de ([212.227.17.13])
  by mail3-smtp-sop.national.inria.fr with ESMTP/TLS/DHE-RSA-AES256-SHA; 05 Aug 2015 17:36:40 +0200
Received: from office1.lan.sumadev.de ([84.59.138.194]) by
 mrelayeu.kundenserver.de (mreue104) with ESMTPSA (Nemesis) id
 0LlVlX-1Yolv61Wnn-00bIiC; Wed, 05 Aug 2015 17:36:39 +0200
Received: from [192.168.65.22] (office6.fritz.box [192.168.65.22])
	by office1.lan.sumadev.de (Postfix) with ESMTPSA id BE502DC05D;
	Wed,  5 Aug 2015 17:36:38 +0200 (CEST)
Message-ID: <1438788990.9319.23.camel@zotac>
From: Gerd Stolpmann <info@gerd-stolpmann.de>
To: Ashish Agarwal <agarwal1975@gmail.com>
Cc: Caml List <caml-list@inria.fr>
Date: Wed, 05 Aug 2015 17:36:30 +0200
In-Reply-To: <CAMu2m2Ly8i+d-c5QUybtT_B4_WjBExi0+E8pHTPJM1Rca0+n5w@mail.gmail.com>
References: 
	<CAMu2m2Ly8i+d-c5QUybtT_B4_WjBExi0+E8pHTPJM1Rca0+n5w@mail.gmail.com>
Content-Type: multipart/signed; micalg="pgp-sha1"; protocol="application/pgp-signature";
	boundary="=-maivSKPZiJu1u6cmivtu"
X-Mailer: Evolution 3.10.4-0ubuntu2 
Mime-Version: 1.0
X-Provags-ID:  V03:K0:AUXqS6KuamEQw0at3T5ehEAfpY+3msi245MjfpBPUAkBVt17rsJ
 VFYGwRAsfCaVcQ5FnGgPucfcl2zY33a8wgcUwtz99HSVrCzftkPfe3O0phgmcQ6+y6RM9rJ
 yh4/0/tIhU1YEOyi4mHEH/zBub4OvvFWq9iX6cOP0iKNXYwQD4Uoviyp8vcT7/p70cEucsi
 oLAtSMfbJ4gOqumk5NoPw==
X-UI-Out-Filterresults: notjunk:1;V01:K0:W4bqtxVSbb4=:elOVQzUXVfdtnQzkO4pxq3
 XnXim9IL44sz3YWFxydd591avBm7qh8n8bbXS3bEJfbrYDh6TUWcJgFnLEjjqmtKNrygtTSvi
 e8/UrAXxQUD/Idhez/ltUBNvW8zz3TTlFNxVx4ORxtB3iih8n1IEHs5M54UBowOvGtpLKU3oe
 ugY/pM1k1EUzUSOrQ6Nb7r3Ym1uaDBTbnqdbhnnPjrFnXjbz8qSTHDpr8XxzHR/6ZEfFs7bxB
 A7ILio0eIr6W7GQnFdB/wuCICXFjGsNVIJm4d46M17NhyYLeWTYTYmuKTl/vhOFzgAANSumC5
 zLve0TpRVVDdE/TMJNWToyXfcvc2pvSrzNshwtyEif/ax9sQ6T1VpfyUKOow+DRvKTdto97LS
 K3cyngZI0pdPthQfVYidWTpOmuyTLFkWgZUykg1PW+kQcE/P4ms0L6gYlrNSy7nspaGC9REuH
 X04VDgerZdUnuHxaEtmITrSqkWVXa3Tn8eWJQmqwmm140WJCgbafyRR8lXbtDy+5H1NmHIH7x
 xBOLtvgx5jhxP+NATVV47EZee05fxBrT3NqcuQkhSdK5hmZKXoFg48Or5YJXcq4skvBIFxFP7
 C4FtYyanwxsGEbB1f2wPyhvn+Im2aM/K04T86ZfVtLlpOr7WQ8LPSAnR21Tgd8Jf+xdamdoTS
 WEs5mjdjgk/8YrvL8HZwJgb6b
Subject: Re: [Caml-list] findlib gives warning that compiler doesn't


--=-maivSKPZiJu1u6cmivtu
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

Am Dienstag, den 04.08.2015, 16:49 -0400 schrieb Ashish Agarwal:
> With the file structure shown below, assume you're in directory libb.
> Then:
>=20
>=20
> $ ocamlc -I ../liba -c a.ml
> (* no warnings *)
>=20
>=20
> $ ocamlfind ocamlc -I ../liba -c a.ml
> findlib: [WARNING] Interface a.cmi occurs in several
> directories: ., ../liba
>=20
>=20
> Why does findlib do an extra check that the compiler is okay with?
> This is causing problems in a project where I'd like to build several
> packed libraries, and one reason for doing so is precisely to reuse
> module names. Am I going about this wrong? My goal is that within
> libb, the only module from liba that should be visible is Liba.

The compiler has always been okay with multiple cmis in different
directories because the assumption is that you have full control over
the directories, and that the search path resolves any conflicts. This
is different when you use findlib. Typically you use libraries from
third parties, and cmi conflicts would remain unnoticed if findlib
didn't check.

This feature, however, is older than packed modules, and findlib doesn't
take packed modules into account. It is a little bit unclear to me how
the check could be made better. Any ideas?

Gerd

>=20
>=20
> =E2=94=9C=E2=94=80=E2=94=80 liba
> =E2=94=82   =E2=94=9C=E2=94=80=E2=94=80 a.cmi
> =E2=94=82   =E2=94=9C=E2=94=80=E2=94=80 a.cmo
> =E2=94=82   =E2=94=9C=E2=94=80=E2=94=80 a.ml
> =E2=94=82   =E2=94=9C=E2=94=80=E2=94=80 b.cmi
> =E2=94=82   =E2=94=9C=E2=94=80=E2=94=80 b.cmo
> =E2=94=82   =E2=94=9C=E2=94=80=E2=94=80 b.ml
> =E2=94=82   =E2=94=9C=E2=94=80=E2=94=80 liba.cma
> =E2=94=82   =E2=94=9C=E2=94=80=E2=94=80 liba.cmi
> =E2=94=82   =E2=94=94=E2=94=80=E2=94=80 liba.cmo
> =E2=94=94=E2=94=80=E2=94=80 libb
>     =E2=94=9C=E2=94=80=E2=94=80 a.cmi
>     =E2=94=9C=E2=94=80=E2=94=80 a.cmo
>     =E2=94=94=E2=94=80=E2=94=80 a.ml
>=20
>=20
>=20

--=20
------------------------------------------------------------
Gerd Stolpmann, Darmstadt, Germany    gerd@gerd-stolpmann.de
My OCaml site:          http://www.camlcity.org
Contact details:        http://www.camlcity.org/contact.html
Company homepage:       http://www.gerd-stolpmann.de
------------------------------------------------------------

--=-maivSKPZiJu1u6cmivtu
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: This is a digitally signed message part
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQEcBAABAgAGBQJVwi1+AAoJEAaM4b9ZLB5TN6AIAIgoyo+z+2/LmeYy3NGG9RCY
J7nDy+ILzy0uWwRNDXvPq32qnWeQXQ/06GM31m7XvSXv1GCJ8Ozmz/s6RvPGh5Ci
63uaR4K6AcI+M7/jfhP92xLuHDKqzbgoRZWgucw6lD/8L5y/IVDr81IEeDIMHgsL
OfJ9nsy4owkE+SYGl/MLlMuQUluZqrdX9yydOgXS3o3omg+FED7Apz0uTVuDICMS
EQqFbQd1fqIHfM5y3a6f+nK3V/OqIhg5AMXFGzZXzTtoJXG7S2Sf0v5h/bb/D9vu
hheZAtAA/s48Z5Kf6CUL0utf3DxZz5WwaiwidVDjX1NYRv5BnzxwQXv5z3176hk=
=5zcc
-----END PGP SIGNATURE-----

--=-maivSKPZiJu1u6cmivtu--

