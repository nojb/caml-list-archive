Received: from mail4-relais-sop.national.inria.fr (mail4-relais-sop.national.inria.fr [192.134.164.105])
	by walapai.inria.fr (8.13.6/8.13.6) with ESMTP id p8IIrxPO018064
	for <caml-list@sympa-roc.inria.fr>; Sun, 18 Sep 2011 20:53:59 +0200
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ao4BAMo8dk7RVaE2imdsb2JhbABCmEqOaAgUAQEBCgkNBxIGIYFTAQEBAQMSAiwBFAcdAQMMBgULDS4hAQERAQUBChIGEyKgFgqLQYJcg107iG0CAwaGcgSTSYoRgnE9hAo
X-IronPort-AV: E=Sophos;i="4.68,401,1312149600"; 
   d="scan'208";a="109498727"
Received: from mail-fx0-f54.google.com ([209.85.161.54])
  by mail4-smtp-sop.national.inria.fr with ESMTP/TLS/RC4-SHA; 18 Sep 2011 20:53:54 +0200
Received: by fxg9 with SMTP id 9so5988028fxg.27
        for <caml-list@inria.fr>; Sun, 18 Sep 2011 11:53:54 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:content-transfer-encoding;
        bh=gJ3z6DPYkh1MPP5s8wSZy/0HvJV3FZElZnQOlOR1+Q4=;
        b=nB+Wvse+jCquOjnshB6dvs7dkyPEeyC7SuilG4bGijFk5WtNlLf5UciAISnfEiGgZG
         EFBmApSglffBRFwe9za0qR41fS6VwwVsBkex/Fm8iSqH6NhV7tBiXNCsWJxUVAh/KR6V
         u07RZd2II9wFoKFAYiM3R2CyDW5jjJqImzWqY=
MIME-Version: 1.0
Received: by 10.223.65.141 with SMTP id j13mr309752fai.101.1316372033971; Sun,
 18 Sep 2011 11:53:53 -0700 (PDT)
Received: by 10.152.19.198 with HTTP; Sun, 18 Sep 2011 11:53:53 -0700 (PDT)
In-Reply-To: <1316371281.68127.YahooMailNeo@web111512.mail.gq1.yahoo.com>
References: <1316371281.68127.YahooMailNeo@web111512.mail.gq1.yahoo.com>
Date: Sun, 18 Sep 2011 14:53:53 -0400
Message-ID: <CAP_800qz36ZNhzJpUbOAbFr6+kBBPiARmfEfmXdQoqaMit+E6g@mail.gmail.com>
From: Markus Mottl <markus.mottl@gmail.com>
To: Dario Teixeira <darioteixeira@yahoo.com>
Cc: caml <caml-list@inria.fr>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-MIME-Autoconverted: from quoted-printable to 8bit by walapai.inria.fr id p8IIrxPO018064
Subject: Re: [Caml-list] Newest Sexplib and Hashtbl

Hi,

There have been some changes to the newest release of Sexplib.  It is
now required to open "Sexplib.Std" to "see" the default converters for
the standard OCaml types.  The same is true for bin-prot.

The code automatically generated by the preprocessor used to hard-code
the converters by explicitly referring to the functions in Sexplib.
But this prevented users from overriding them, motivating Jane Street
to propose this change.

Sorry, it seems that this change hasn't been mentioned in the docs.
This will be fixed in future documentation releases.  Please let me
know if there are any other issues.

Regards,
Markus

On Sun, Sep 18, 2011 at 14:41, Dario Teixeira <darioteixeira@yahoo.com> wrote:
> Hi,
> I've updated to the latest version of Sexplib, and the support for hashtable
> serialisation
> seems broken or at least changed.  I was accustomed to using the syntax
> extension
> for convenient declaration of (de)serialisers, and this worked too for the
> Hashtbl module.
> For example:
>
> type dict_t = (key_t, value_t) Hashtbl.t with sexp
> But with Sexplib 7.0.4 this produces an error:
>
> Error: Unbound value Hashtbl.t_of_sexp
> Is this a bug, or must the (de)serialisers be declared manually with the
> newer versions
> of Sexplib?
> Thanks in advance for your time!
> Best regards,
> Dario Teixeira
>



-- 
Markus Mottl        http://www.ocaml.info        markus.mottl@gmail.com

