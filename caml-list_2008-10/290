Return-Path: <agarwal1975@gmail.com>
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on yquem.inria.fr
X-Spam-Level: **
X-Spam-Status: No, score=2.4 required=5.0 tests=AWL,DNS_FROM_RFC_POST,
	DNS_FROM_SECURITYSAGE,HTML_MESSAGE,SPF_NEUTRAL autolearn=disabled 
	version=3.1.3
X-Original-To: caml-list@yquem.inria.fr
Delivered-To: caml-list@yquem.inria.fr
Received: from mail4-relais-sop.national.inria.fr (mail4-relais-sop.national.inria.fr [192.134.164.105])
	by yquem.inria.fr (Postfix) with ESMTP id 15BC8BBAF
	for <caml-list@yquem.inria.fr>; Wed, 22 Oct 2008 15:08:19 +0200 (CEST)
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AqQBAI/C/khKfSwckWdsb2JhbACCQzCQOj4BAQEBCQsKBxEDqRR8h3wBAwEDg0w
X-IronPort-AV: E=Sophos;i="4.33,464,1220220000"; 
   d="scan'208";a="30617865"
Received: from concorde.inria.fr ([192.93.2.39])
  by mail4-smtp-sop.national.inria.fr with ESMTP; 22 Oct 2008 15:08:19 +0200
Received: from mail4-relais-sop.national.inria.fr (mail4-relais-sop.national.inria.fr [192.134.164.105])
	by concorde.inria.fr (8.13.6/8.13.6) with ESMTP id m9MD8DOG014639
	(version=TLSv1/SSLv3 cipher=RC4-SHA bits=128 verify=OK)
	for <caml-list@inria.fr>; Wed, 22 Oct 2008 15:08:18 +0200
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AqQBAI/C/khKfSwckWdsb2JhbACCQzCQOj4BAQEBCQsKBxEDqRR8h3wBAwEDg0w
X-IronPort-AV: E=Sophos;i="4.33,464,1220220000"; 
   d="scan'208";a="30617863"
Received: from yx-out-2324.google.com ([74.125.44.28])
  by mail4-smtp-sop.national.inria.fr with ESMTP; 22 Oct 2008 15:08:17 +0200
Received: by yx-out-2324.google.com with SMTP id 8so493129yxg.27
        for <caml-list@inria.fr>; Wed, 22 Oct 2008 06:08:17 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to
         :subject:cc:in-reply-to:mime-version:content-type:references;
        bh=3shjHZdBjdvH7LGTauXd9lVKX4KdcvHJpC2xSiyENtg=;
        b=TkBgj4/UCGfjtHA3RcHmDZ8hyYw4K7tBpEMxsVnq4iX5NVWNqGLQpJ8vx4bXfAmpw2
         Fyz1ZNzj4GMHnSTH5MruSxSas3dTCBDDeY9tzRnLM+0ZSdwfbG0YhJ7QjizPemZ4QGpw
         5riic3jQh5Dgd1GY5E3mRy/NQuD5EtswcszbM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version
         :content-type:references;
        b=HdgN8zyLz57Xiye3X1uyHUe5ZUfRTg0/FMQOgM0Gv8GbxrvcQcsIKT8f1fff1Io56r
         KSQ+tq9R9Ivj0H6jihCqeaKMjWncJJlb+mbAXFWSORtUTc5rQ+fc7i+Qr+kRTfGpPcys
         FixtZ0jW5p5hB/0Igs96CyYC6SjiC9cJIyFN4=
Received: by 10.142.229.5 with SMTP id b5mr4339230wfh.50.1224680896341;
        Wed, 22 Oct 2008 06:08:16 -0700 (PDT)
Received: by 10.143.162.5 with HTTP; Wed, 22 Oct 2008 06:08:16 -0700 (PDT)
Message-ID: <d8be5ae20810220608tcbccb21w1d35216dec0d42b7@mail.gmail.com>
Date: Wed, 22 Oct 2008 09:08:16 -0400
From: "Ashish Agarwal" <agarwal1975@gmail.com>
To: "Mark Shinwell" <mshinwell@janestcapital.com>
Subject: Re: [Caml-list] problem installing janestreet core through godi
Cc: "Markus Mottl" <markus.mottl@gmail.com>,
	"Caml List" <caml-list@inria.fr>
In-Reply-To: <20081022081635.GU14123@janestcapital.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_26481_23781307.1224680896328"
References: <d8be5ae20810211134q5142ff98rcdcce6e8998c7380@mail.gmail.com>
	 <f8560b80810211322p54f80ea3sde1484ca9ed56ab8@mail.gmail.com>
	 <20081022081635.GU14123@janestcapital.com>
X-Miltered: at concorde with ID 48FF25BD.000 by Joe's j-chkmail (http://j-chkmail . ensmp . fr)!
X-Spam: no; 0.00; mli:01 cpp:01 flags:01 gcc:01 flags:01 compilation:01 ocamlfind:01 ocamlc:01 -package:01 camlp:01 -for-pack:01 shinwell:01 markus:01 mottl:01 ocamlfind:01 

------=_Part_26481_23781307.1224680896328
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you for the replies. In type_class.ml and type_class.mli, I
replaced (*pp cpp $ARCH_FLAGS *) with (*pp gcc -E $ARCH_FLAGS *). The
compilation gets further but now fails with:...
ocamlfind ocamlc -package type-conv -c -I +camlp4 -for-pack Bin_prot
binable.ml
File "binable.ml", line 36, characters 21-46:
Unbound type constructor Type_class.writer


On Wed, Oct 22, 2008 at 4:16 AM, Mark Shinwell
<mshinwell@janestcapital.com>wrote:

> On Tue, Oct 21, 2008 at 04:22:09PM -0400, Markus Mottl wrote:
> > 2008/10/21 Ashish Agarwal <Ashish.Agarwal@yale.edu>:
> > > I am having trouble installing JaneStreet's Core library through godi.
> > > On Mac OS X, it fails while installing the prerequisite bin-prot:
> > > ...
> > >> ocamlfind ocamlc -package type-conv -c -pp "cpp $ARCH_FLAGS " -I
> +camlp4
> > >> type_class.mli
> > >> File "type_class.mli", line 93, characters 15-16:
> > >> Syntax error
> > > ...
> > > Line 93 of type_class.mli is:
> > > MK_BASE(unit)
> >
> > It's possible that the C-preprocessor works differently on Mac OS X.
> > I haven't investigated this yet, but would be grateful if anybody who
> > has set up Godi on a Mac could try to find a patch.
>
> There is something about the preprocessors on Mac OS X which causes cpp to
> behave differently from gcc -E; I've hit this before but can't remember the
> full explanation offhand.  You can see the difference, for example, if you
> try to use the ## operator.  Does everything work if you get everything
> to use gcc -E for preprocessing?
>
> Mark
>

------=_Part_26481_23781307.1224680896328
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thank you for the replies. In <a href="http://type_class.ml">type_class.ml</a> and type_class.mli, I replaced&nbsp;(*pp cpp $ARCH_FLAGS *) with&nbsp;(*pp gcc -E $ARCH_FLAGS *).&nbsp;The compilation gets further but now fails with:<div>...</div>
<div><div>ocamlfind ocamlc -package type-conv -c -I +camlp4 -for-pack Bin_prot <a href="http://binable.ml">binable.ml</a></div><div>File &quot;<a href="http://binable.ml">binable.ml</a>&quot;, line 36, characters 21-46:</div>
<div>Unbound type constructor Type_class.writer</div><div><br></div><br><div class="gmail_quote">On Wed, Oct 22, 2008 at 4:16 AM, Mark Shinwell <span dir="ltr">&lt;<a href="mailto:mshinwell@janestcapital.com">mshinwell@janestcapital.com</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;"><div class="Ih2E3d">On Tue, Oct 21, 2008 at 04:22:09PM -0400, Markus Mottl wrote:<br>
&gt; 2008/10/21 Ashish Agarwal &lt;<a href="mailto:Ashish.Agarwal@yale.edu">Ashish.Agarwal@yale.edu</a>&gt;:<br>
&gt; &gt; I am having trouble installing JaneStreet&#39;s Core library through godi.<br>
&gt; &gt; On Mac OS X, it fails while installing the prerequisite bin-prot:<br>
&gt; &gt; ...<br>
&gt; &gt;&gt; ocamlfind ocamlc -package type-conv -c -pp &quot;cpp $ARCH_FLAGS &quot; -I +camlp4<br>
&gt; &gt;&gt; type_class.mli<br>
&gt; &gt;&gt; File &quot;type_class.mli&quot;, line 93, characters 15-16:<br>
&gt; &gt;&gt; Syntax error<br>
&gt; &gt; ...<br>
&gt; &gt; Line 93 of type_class.mli is:<br>
&gt; &gt; MK_BASE(unit)<br>
&gt;<br>
&gt; It&#39;s possible that the C-preprocessor works differently on Mac OS X.<br>
&gt; I haven&#39;t investigated this yet, but would be grateful if anybody who<br>
&gt; has set up Godi on a Mac could try to find a patch.<br>
<br>
</div>There is something about the preprocessors on Mac OS X which causes cpp to<br>
behave differently from gcc -E; I&#39;ve hit this before but can&#39;t remember the<br>
full explanation offhand. &nbsp;You can see the difference, for example, if you<br>
try to use the ## operator. &nbsp;Does everything work if you get everything<br>
to use gcc -E for preprocessing?<br>
<font color="#888888"><br>
Mark<br>
</font></blockquote></div><br></div>

------=_Part_26481_23781307.1224680896328--

