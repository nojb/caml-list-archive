Return-Path: <thomas.gazagnaire@gmail.com>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail2-relais-roc.national.inria.fr (mail2-relais-roc.national.inria.fr [192.134.164.83])
	by sympa.inria.fr (Postfix) with ESMTPS id D83A97EE63
	for <caml-list@sympa.inria.fr>; Thu, 30 May 2013 09:38:12 +0200 (CEST)
Received-SPF: None (mail2-smtp-roc.national.inria.fr: no sender
  authenticity information available from domain of
  thomas.gazagnaire@gmail.com) identity=pra;
  client-ip=74.125.82.174;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="thomas.gazagnaire@gmail.com";
  x-sender="thomas.gazagnaire@gmail.com";
  x-conformance=sidf_compatible
Received-SPF: Pass (mail2-smtp-roc.national.inria.fr: domain of
  thomas.gazagnaire@gmail.com designates 74.125.82.174 as
  permitted sender) identity=mailfrom; client-ip=74.125.82.174;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="thomas.gazagnaire@gmail.com";
  x-sender="thomas.gazagnaire@gmail.com";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
Received-SPF: None (mail2-smtp-roc.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@mail-we0-f174.google.com) identity=helo;
  client-ip=74.125.82.174;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="thomas.gazagnaire@gmail.com";
  x-sender="postmaster@mail-we0-f174.google.com";
  x-conformance=sidf_compatible
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Au8BAJ0Ap1FKfVKujWdsb2JhbABZgzkBvi+DWnsWDgEBAQEHCwsJEgYkgiMBAQQBOgYBOAEDAQsBBQVGNAEFARwGiA4DCQYECJtkjzyFFCcNiHoBBQyOVIMwYQOYZIR1iT0/gV2CWg
X-IPAS-Result: Au8BAJ0Ap1FKfVKujWdsb2JhbABZgzkBvi+DWnsWDgEBAQEHCwsJEgYkgiMBAQQBOgYBOAEDAQsBBQVGNAEFARwGiA4DCQYECJtkjzyFFCcNiHoBBQyOVIMwYQOYZIR1iT0/gV2CWg
X-IronPort-AV: E=Sophos;i="4.87,769,1363129200"; 
   d="scan'208";a="19570815"
Received: from mail-we0-f174.google.com ([74.125.82.174])
  by mail2-smtp-roc.national.inria.fr with ESMTP/TLS/RC4-SHA; 30 May 2013 09:38:12 +0200
Received: by mail-we0-f174.google.com with SMTP id x50so5328843wes.33
        for <caml-list@inria.fr>; Thu, 30 May 2013 00:38:12 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=sender:subject:mime-version:content-type:from:in-reply-to:date:cc
         :content-transfer-encoding:message-id:references:to:x-mailer;
        bh=60Z+qtBHcLXYIaOym8DciGbVXrNIB/yfWjz2G+X1puc=;
        b=aARsVrCY+DRW8SvY66L4xDfBfaG9VQz1N/ncFptYC3dUvxT09iBkrNrN8qalTIyWIB
         HKQsVT/9dl3sBpAre8JXHtm4kQuJjh1H9kLohbrbvLtl4f/b5VIbDN5GFVbV3CQo+2Mk
         QnGUiN5sm332IoLY14W8H3psIxxeKieQ/vD2mVpYWaFYs+Zwb7Bv9KWgUXEs+jcifExI
         1Ap4LDwFJF6mwUU1fpzdFsh6DvEnZWRWyPxKKBPsukJcZnM/uDwf6TJvAFUJiYnNAjSA
         9YYMQ6go+AGV4WxjLKnxAPhVRLPlxlyl5YKmoOqeQC0UXAfre3SepFoiLNtqXkdHoe0L
         JTwQ==
X-Received: by 10.180.184.75 with SMTP id es11mr3225746wic.38.1369899492498;
        Thu, 30 May 2013 00:38:12 -0700 (PDT)
Received: from [10.35.195.146] ([213.30.181.210])
        by mx.google.com with ESMTPSA id m3sm36004408wij.5.2013.05.30.00.38.11
        for <multiple recipients>
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Thu, 30 May 2013 00:38:11 -0700 (PDT)
Sender: Thomas Gazagnaire <thomas.gazagnaire@gmail.com>
Mime-Version: 1.0 (Apple Message framework v1085)
Content-Type: text/plain; charset=us-ascii
From: Thomas Gazagnaire <thomas@ocamlpro.com>
In-Reply-To: <3da55d6fccc845346c96c7af502cc706@chimrod.com>
Date: Thu, 30 May 2013 09:38:09 +0200
Cc: <caml-list@inria.fr>
Content-Transfer-Encoding: quoted-printable
Message-Id: <85FC58B0-BA1E-49C0-9380-802315C81592@ocamlpro.com>
References: <CAE1DttB8v4hp1jjf7hhQhaeaH9orong36L2LoRScf_QwGJGiXA@mail.gmail.com> <3da55d6fccc845346c96c7af502cc706@chimrod.com>
To: =?iso-8859-1?Q?S=E9bastien_Dailly?= <sebastien-ocaml@chimrod.com>
X-Mailer: Apple Mail (2.1085)
Subject: Re: [Caml-list] Re: ~/.opam design

> Maybe is the subject now closed, and I'm answering too late, but I'll gre=
atly appreciate if opam could follow the XDG Directory design[1] :
>=20
> $XDG_CONFIG_HOME/opam (default ~/.config/opam) for the configuration
> $XDG_DATA_HOME/opam (default ~/.local/opam) for the package and all datas
>=20
> This allow to stop the polution in the users ~ , and give the user a way =
to define it's own path.
>=20
> [1] http://standards.freedesktop.org/basedir-spec/basedir-spec-latest.html

The subject is not closed at all, and we might move in this direction in fu=
ture releases of OPAM. See for instance [1]

The current design has a lot of advantages (the main one being that you can=
 remove your ~/.opam if you want restart from scratch) and it can be tweake=
d to have a global installation (see [2,3], even if the tweak is not very w=
ell documented). But yes, for some configurations (such as shared NFS homed=
irs), the current situation is not perfect and it would be nice to be able =
to separate the data from the configuration bits. Luckily, all the paths us=
ed by OPAM are defined in [4] so they can be changed without too much hassl=
e.

Best,
Thomas

[1]  https://github.com/OCamlPro/opam/issues/401
[2] https://github.com/OCamlPro/opam/issues/398
[3] https://github.com/OCamlPro/opam-repository/issues/746
[4] https://github.com/OCamlPro/opam/blob/master/src/core/opamPath.ml

