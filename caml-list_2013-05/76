Return-Path: <info@gerd-stolpmann.de>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail3-relais-sop.national.inria.fr (mail3-relais-sop.national.inria.fr [192.134.164.104])
	by sympa.inria.fr (Postfix) with ESMTPS id EFC5A7EE51
	for <caml-list@sympa.inria.fr>; Tue, 14 May 2013 00:22:25 +0200 (CEST)
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  info@gerd-stolpmann.de) identity=pra;
  client-ip=212.227.126.186;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="info@gerd-stolpmann.de";
  x-conformance=sidf_compatible
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  info@gerd-stolpmann.de) identity=mailfrom;
  client-ip=212.227.126.186;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="info@gerd-stolpmann.de";
  x-conformance=sidf_compatible
Received-SPF: Pass (mail3-smtp-sop.national.inria.fr: domain of
  postmaster@moutng.kundenserver.de designates 212.227.126.186
  as permitted sender) identity=helo;
  client-ip=212.227.126.186;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="postmaster@moutng.kundenserver.de";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AvkAADlmkVHU4366k2dsb2JhbABagz6uD5IjgQwWDgEBAQEHCwsJFAMlgh8BAQQBbgsFCwUGGA0hRRIGEwkIAYdoAwkKCK4ThgkDiECJJoVcJgeDVQOOSRiJcY5AhGA
X-IPAS-Result: AvkAADlmkVHU4366k2dsb2JhbABagz6uD5IjgQwWDgEBAQEHCwsJFAMlgh8BAQQBbgsFCwUGGA0hRRIGEwkIAYdoAwkKCK4ThgkDiECJJoVcJgeDVQOOSRiJcY5AhGA
X-IronPort-AV: E=Sophos;i="4.87,665,1363129200"; 
   d="scan'208";a="14234654"
Received: from moutng.kundenserver.de ([212.227.126.186])
  by mail3-smtp-sop.national.inria.fr with ESMTP/TLS/RC4-SHA; 14 May 2013 00:22:25 +0200
Received: from office1.lan.sumadev.de (dslb-188-097-009-153.pools.arcor-ip.net [188.97.9.153])
	by mrelayeu.kundenserver.de (node=mreu4) with ESMTP (Nemesis)
	id 0MRNdb-1V5tA016xL-00UeMB; Tue, 14 May 2013 00:22:23 +0200
Received: from gps.dynxs.de (localhost [127.0.0.1])
	by office1.lan.sumadev.de (Postfix) with ESMTP id 8F014C00CF;
	Tue, 14 May 2013 00:22:22 +0200 (CEST)
Received: from 84.107.248.22
        (SquirrelMail authenticated user gerd)
        by gps.dynxs.de with HTTP;
        Tue, 14 May 2013 00:22:23 +0200
Message-ID: <fbad998fa43b2862fd0386bfc5bb0be5.squirrel@gps.dynxs.de>
In-Reply-To:
 <CAPFanBGjSQRVZRxSCrmsbcxLT1xO4+Lw_i+ZvhJX2HWGf=CxAw@mail.gmail.com>
References: <51904669.5040001@riken.jp> <51904E8A.9040603@riken.jp>
    <CAPFanBGjSQRVZRxSCrmsbcxLT1xO4+Lw_i+ZvhJX2HWGf=CxAw@mail.gmail.com>
Date: Tue, 14 May 2013 00:22:23 +0200
From: "Gerd Stolpmann" <info@gerd-stolpmann.de>
To: "Gabriel Scherer" <gabriel.scherer@gmail.com>
Cc: "Francois Berenger" <berenger@riken.jp>,
 caml-list@inria.fr
User-Agent: SquirrelMail/1.4.21
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
X-Priority: 3 (Normal)
Importance: Normal
Content-Transfer-Encoding: quoted-printable
X-Provags-ID: V02:K0:vEd/xcsoScO2ksPbVAN5ln1vhcKAqy9NUyeEbjuu8qB
 aPMa22y4ld+g0qgha9QbqD9R+Ypo58QpmG2/kqx7AC0ooh1Xt1
 WzTtYFEx1oTirSa3ZYfM7cL/UM9vyh4zm2lYT2hmpv1fsVgIpj
 RwAoioFk4vmzy5pRCpYrhVdAmIUvI8wz0o9KFG1wmOPnKLsSsg
 m4D+3I1uaCF9WHR2KBj+VNugOZy1L4n2NGsFT58gWO8Hdwh6/G
 /D6RpK0Eharv4rnwb2qigsl0/iI1Gk72ANfqNqzFasQrnWBV3Q
 1gp6WAfkmnBwqOOItkGUzg/RtATmGzPPg6qRcz14s8dwQSn0+/
 iCIkprMbAMDTrExznslJDZ6mi1VlGY/7eraWigwp2KATVZuooL
 R658ssI21v5uA==
Subject: Re: [Caml-list] smarter #load directive


> Following the caml-list discussion, and PR submission #5825 by
> Gr=E9goire Henry (with a patch!), the directive #mod_use "foo.ml" was
> added in trunk last November.
>
> It does not correspond to "load" because the module is not compiled
> using ocamlc (no .cmo is produced), but compiled by the toplevel in
> the current toplevel environment. The current implementation is a bit
> hackish, I think, and in particular toplevel directives are not
> allowed inside foo.ml -- I think they even are silently dropped. It
> behaves exactly as if you entered "module Foo =3D <content of foo.ml
> (minus toplevel directives)> end;;" directly in the toplevel.

So far I remember, this is the intended meaning. Directives do not make
sense inside modules. If they are not rejected, I'd consider this as an
error, though.

Gerd

> On Mon, May 13, 2013 at 4:23 AM, Francois Berenger <berenger@riken.jp>
> wrote:
>> On 05/13/2013 10:48 AM, Francois Berenger wrote:
>>>
>>> Hello,
>>>
>>> Was this integrated in the subversion trunk?
>>>
>>> I mean the
>>> #load "toto.ml";;
>>> that creates a Toto module automatically.
>>
>>
>> Or was it '#use "toto.ml";;' ?
>>
>>
>>> Thanks a lot,
>>> F.
>>>
>>
>>
>> --
>> Caml-list mailing list.  Subscription management and archives:
>> https://sympa.inria.fr/sympa/arc/caml-list
>> Beginner's list: http://groups.yahoo.com/group/ocaml_beginners
>> Bug reports: http://caml.inria.fr/bin/caml-bugs
>
> --
> Caml-list mailing list.  Subscription management and archives:
> https://sympa.inria.fr/sympa/arc/caml-list
> Beginner's list: http://groups.yahoo.com/group/ocaml_beginners
> Bug reports: http://caml.inria.fr/bin/caml-bugs
>


--=20
Gerd Stolpmann, Darmstadt, Germany    gerd@gerd-stolpmann.de
Creator of GODI and camlcity.org.
Contact details:        http://www.camlcity.org/contact.html

