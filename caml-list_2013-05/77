Return-Path: <info@gerd-stolpmann.de>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail3-relais-sop.national.inria.fr (mail3-relais-sop.national.inria.fr [192.134.164.104])
	by sympa.inria.fr (Postfix) with ESMTPS id 0D2237EE64
	for <caml-list@sympa.inria.fr>; Tue, 14 May 2013 00:22:26 +0200 (CEST)
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  info@gerd-stolpmann.de) identity=pra; client-ip=212.227.17.9;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="info@gerd-stolpmann.de";
  x-conformance=sidf_compatible
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  info@gerd-stolpmann.de) identity=mailfrom;
  client-ip=212.227.17.9;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="info@gerd-stolpmann.de";
  x-conformance=sidf_compatible
Received-SPF: Pass (mail3-smtp-sop.national.inria.fr: domain of
  postmaster@moutng.kundenserver.de designates 212.227.17.9 as
  permitted sender) identity=helo; client-ip=212.227.17.9;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="postmaster@moutng.kundenserver.de";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AvkAADlmkVHU4xEJlGdsb2JhbABagz6uD5IjgQwWDgEBAQEHDQkJFAMlgh8BAQQBbgsFCwUGGA0hRRIGEwkIAYdoAwkKCK4ThgkDiECJJoVcJgeDVQOOSRiJcY5AhGA
X-IPAS-Result: AvkAADlmkVHU4xEJlGdsb2JhbABagz6uD5IjgQwWDgEBAQEHDQkJFAMlgh8BAQQBbgsFCwUGGA0hRRIGEwkIAYdoAwkKCK4ThgkDiECJJoVcJgeDVQOOSRiJcY5AhGA
X-IronPort-AV: E=Sophos;i="4.87,665,1363129200"; 
   d="scan'208";a="14234655"
Received: from moutng.kundenserver.de ([212.227.17.9])
  by mail3-smtp-sop.national.inria.fr with ESMTP/TLS/RC4-SHA; 14 May 2013 00:22:25 +0200
Received: from office1.lan.sumadev.de (dslb-188-097-009-153.pools.arcor-ip.net [188.97.9.153])
	by mrelayeu.kundenserver.de (node=mreu4) with ESMTP (Nemesis)
	id 0MTaYl-1V3gE33BHr-00SSRJ; Tue, 14 May 2013 00:22:24 +0200
Received: from gps.dynxs.de (localhost [127.0.0.1])
	by office1.lan.sumadev.de (Postfix) with ESMTP id 1AB41C00CF;
	Tue, 14 May 2013 00:22:24 +0200 (CEST)
Received: from 84.107.248.22
        (SquirrelMail authenticated user gerd)
        by gps.dynxs.de with HTTP;
        Tue, 14 May 2013 00:22:24 +0200
Message-ID: <c7039036495d445384525f5a42dc370a.squirrel@gps.dynxs.de>
In-Reply-To:
 <CAPFanBGjSQRVZRxSCrmsbcxLT1xO4+Lw_i+ZvhJX2HWGf=CxAw@mail.gmail.com>
References: <51904669.5040001@riken.jp> <51904E8A.9040603@riken.jp>
    <CAPFanBGjSQRVZRxSCrmsbcxLT1xO4+Lw_i+ZvhJX2HWGf=CxAw@mail.gmail.com>
Date: Tue, 14 May 2013 00:22:24 +0200
From: "Gerd Stolpmann" <info@gerd-stolpmann.de>
To: "Gabriel Scherer" <gabriel.scherer@gmail.com>
Cc: "Francois Berenger" <berenger@riken.jp>,
 caml-list@inria.fr
User-Agent: SquirrelMail/1.4.21
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
X-Priority: 3 (Normal)
Importance: Normal
Content-Transfer-Encoding: quoted-printable
X-Provags-ID: V02:K0:W5eLqcDfmt8NdvSn4HEru4wI7ponUP2kGkUriEpTQKw
 LOaMn58228v84CWa6wXMW3CWJMcCGxl7uPNwO1eSJ2/m87MmCn
 W0X311pj2d+gIw9DfRLathK3/BGA8P1w5Cbnvc+0Lb4QFtgwjf
 yFkVnWf9NL8dlO5Tl7BF2nBE4dBBB9Yw5IiZWMTPW51xE0afq6
 /SeEPzF4ryoQ+wk2vGCL+oNouSGUXKhawAI89L1yUQAQlTDxum
 SuZRapLoHYRM1cFlM4g0Jvd4EUXKCfyirtpj1H38v6tRf6O/WB
 p0SE4KvkbcFsrgGfAEldYC2zvh5WdhT54xrSuLPo00olsrfdT+
 g8enBSAhI1UiJ0tWBtcnSsUTL3Jmf86YPUzba4KZ4spWoGyegr
 mb9JDP8COK80g==
Subject: Re: [Caml-list] smarter #load directive


> Following the caml-list discussion, and PR submission #5825 by
> Gr=E9goire Henry (with a patch!), the directive #mod_use "foo.ml" was
> added in trunk last November.
>
> It does not correspond to "load" because the module is not compiled
> using ocamlc (no .cmo is produced), but compiled by the toplevel in
> the current toplevel environment. The current implementation is a bit
> hackish, I think, and in particular toplevel directives are not
> allowed inside foo.ml -- I think they even are silently dropped. It
> behaves exactly as if you entered "module Foo =3D <content of foo.ml
> (minus toplevel directives)> end;;" directly in the toplevel.

So far I remember, this is the intended meaning. Directives do not make
sense inside modules. If they are not rejected, I'd consider this as an
error, though.

Gerd

> On Mon, May 13, 2013 at 4:23 AM, Francois Berenger <berenger@riken.jp>
> wrote:
>> On 05/13/2013 10:48 AM, Francois Berenger wrote:
>>>
>>> Hello,
>>>
>>> Was this integrated in the subversion trunk?
>>>
>>> I mean the
>>> #load "toto.ml";;
>>> that creates a Toto module automatically.
>>
>>
>> Or was it '#use "toto.ml";;' ?
>>
>>
>>> Thanks a lot,
>>> F.
>>>
>>
>>
>> --
>> Caml-list mailing list.  Subscription management and archives:
>> https://sympa.inria.fr/sympa/arc/caml-list
>> Beginner's list: http://groups.yahoo.com/group/ocaml_beginners
>> Bug reports: http://caml.inria.fr/bin/caml-bugs
>
> --
> Caml-list mailing list.  Subscription management and archives:
> https://sympa.inria.fr/sympa/arc/caml-list
> Beginner's list: http://groups.yahoo.com/group/ocaml_beginners
> Bug reports: http://caml.inria.fr/bin/caml-bugs
>


--=20
Gerd Stolpmann, Darmstadt, Germany    gerd@gerd-stolpmann.de
Creator of GODI and camlcity.org.
Contact details:        http://www.camlcity.org/contact.html

