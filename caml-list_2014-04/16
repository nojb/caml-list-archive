Return-Path: <yotambarnoy@gmail.com>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail2-relais-roc.national.inria.fr (mail2-relais-roc.national.inria.fr [192.134.164.83])
	by sympa.inria.fr (Postfix) with ESMTPS id A65F67F89E
	for <caml-list@sympa.inria.fr>; Wed,  2 Apr 2014 22:54:34 +0200 (CEST)
Received-SPF: None (mail2-smtp-roc.national.inria.fr: no sender
  authenticity information available from domain of
  yotambarnoy@gmail.com) identity=pra; client-ip=209.85.216.45;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="yotambarnoy@gmail.com";
  x-sender="yotambarnoy@gmail.com";
  x-conformance=sidf_compatible
Received-SPF: Pass (mail2-smtp-roc.national.inria.fr: domain of
  yotambarnoy@gmail.com designates 209.85.216.45 as permitted
  sender) identity=mailfrom; client-ip=209.85.216.45;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="yotambarnoy@gmail.com";
  x-sender="yotambarnoy@gmail.com";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
Received-SPF: None (mail2-smtp-roc.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@mail-qa0-f45.google.com) identity=helo;
  client-ip=209.85.216.45;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="yotambarnoy@gmail.com";
  x-sender="postmaster@mail-qa0-f45.google.com";
  x-conformance=sidf_compatible
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Am4EAHt4PFPRVdgteGdsb2JhbABZg0FXrHSNfoh0gRsIFg4BFSYqgiUBAQEDAUABGxILAQMBCwYFBAcNDSEiAREBBQEKEgYTEodSAQMJCA2hD4xfgw6WIAoZJwMKZIZSEQEFDI5gBAeEOASYWIEzjxcYKYR6IQ
X-IPAS-Result: Am4EAHt4PFPRVdgteGdsb2JhbABZg0FXrHSNfoh0gRsIFg4BFSYqgiUBAQEDAUABGxILAQMBCwYFBAcNDSEiAREBBQEKEgYTEodSAQMJCA2hD4xfgw6WIAoZJwMKZIZSEQEFDI5gBAeEOASYWIEzjxcYKYR6IQ
X-IronPort-AV: E=Sophos;i="4.97,782,1389740400"; 
   d="scan'208";a="66102234"
Received: from mail-qa0-f45.google.com ([209.85.216.45])
  by mail2-smtp-roc.national.inria.fr with ESMTP/TLS/RC4-SHA; 02 Apr 2014 22:54:33 +0200
Received: by mail-qa0-f45.google.com with SMTP id hw13so745470qab.32
        for <multiple recipients>; Wed, 02 Apr 2014 13:54:32 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        bh=3MNVS04JKuWvZGCntZL5jv4saqsLoTVdavWbG4jQ55k=;
        b=YAc35Yszby5hJNyyv+7jLjYBf/razuQVeTR5xRUyIts3nP7uasoN47QoMMlhb2mJeC
         96cmxJlidM7nLBvKRdAHfCZzBATCrnGKtMZGdMOk71cs5gS+vbk2XmSCFAiRUbNXuvsC
         uXRQXPXs2dP4+Sj7pYiDAONwQDSTOVNQabt3m4MkO/3O6U16XaNbP4m1/huI92eDYQoy
         b4S2+aU7TBGs0BARacR81wEnOYyqn599WFLCthHNViCONfR4tyIsPjnapvnAbGBGvLYv
         BvR19R/hWrQAQMrOBNlSqh1gObKn0onb6WDChncsDemPfcZ1J+D6uKsLk9D6pJF0WkUL
         /SiQ==
X-Received: by 10.229.192.7 with SMTP id do7mr3293075qcb.1.1396472072863; Wed,
 02 Apr 2014 13:54:32 -0700 (PDT)
MIME-Version: 1.0
Received: by 10.224.168.72 with HTTP; Wed, 2 Apr 2014 13:54:12 -0700 (PDT)
In-Reply-To: <CAHvkLrNyM-gkG+dOpjhktJpgOPP8nsSzRL3Ldr9b36zQzbyX3A@mail.gmail.com>
References: <533C6FC2.9080406@fugmann.net> <9EC7944797D54A8E893837CB84026489@erratique.ch>
 <CAHvkLrNyM-gkG+dOpjhktJpgOPP8nsSzRL3Ldr9b36zQzbyX3A@mail.gmail.com>
From: Yotam Barnoy <yotambarnoy@gmail.com>
Date: Wed, 2 Apr 2014 16:54:12 -0400
Message-ID: <CAN6ygO=c4zUcP7iqZjWOB533_LLA=gGF-sZee52M6zLhnPCeoA@mail.gmail.com>
To: Fabrice Le Fessant <Fabrice.Le_fessant@inria.fr>
Cc: =?ISO-8859-1?Q?Daniel_B=FCnzli?= <daniel.buenzli@erratique.ch>, 
	Anders Peter Fugmann <anders@fugmann.net>, caml-list <caml-list@inria.fr>
Content-Type: multipart/alternative; boundary=001a11337d4ad787aa04f6157dc5
Subject: Re: [Caml-list] Speeding up compilation

--001a11337d4ad787aa04f6157dc5
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

I've had good experience shifting from a custom makefile to using
ocamlbuild on a project with around 120 files and moderate preprocessing.
The custom makefile was a pain to maintain and seemed to be doing too much
work.

-Yotam


On Wed, Apr 2, 2014 at 4:43 PM, Fabrice Le Fessant <
Fabrice.Le_fessant@inria.fr> wrote:

> ocp-build uses a trick to speed-up compilations with camlp4: it
> preprocesses every file only once, and then uses the generated file (a
> binary version of the file AST) with ocamldep, ocamlc and ocamlopt. It
> usually means a x3 speedup.
>
> --Fabrice
>
>
> On Wed, Apr 2, 2014 at 10:34 PM, Daniel B=FCnzli <
> daniel.buenzli@erratique.ch> wrote:
>
>>
>>
>> Le mercredi, 2 avril 2014 =E0 22:14, Anders Peter Fugmann a =E9crit :
>>
>> > Is there any way to use a optimized version of camlp4.
>>
>> Not sure that this will work as it it not mentioned in the documentation
>> [1] but did you try to add
>>
>> camlp4=3D"camlp4.opt"
>>
>> in .opam/$SWITCH/lib/findlib.conf (or wherever it is on your machine).
>>
>> Best,
>>
>> Daniel
>>
>> [1]
>> http://projects.camlcity.org/projects/dl/findlib-1.4.1/doc/ref-html/r775=
.html
>>
>>
>>
>> --
>> Caml-list mailing list.  Subscription management and archives:
>> https://sympa.inria.fr/sympa/arc/caml-list
>> Beginner's list: http://groups.yahoo.com/group/ocaml_beginners
>> Bug reports: http://caml.inria.fr/bin/caml-bugs
>>
>
>
>
> --
> Fabrice LE FESSANT
> Chercheur en Informatique
> INRIA Paris Rocquencourt -- OCamlPro
> Programming Languages and Distributed Systems
>

--001a11337d4ad787aa04f6157dc5
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div>I&#39;ve had good experience shifting from a custom m=
akefile to using ocamlbuild on a project with around 120 files and moderate=
 preprocessing. The custom makefile was a pain to maintain and seemed to be=
 doing too much work.<br>

<br></div>-Yotam<br></div><div class=3D"gmail_extra"><br><br><div class=3D"=
gmail_quote">On Wed, Apr 2, 2014 at 4:43 PM, Fabrice Le Fessant <span dir=
=3D"ltr">&lt;<a href=3D"mailto:Fabrice.Le_fessant@inria.fr" target=3D"_blan=
k">Fabrice.Le_fessant@inria.fr</a>&gt;</span> wrote:<br>

<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><div dir=3D"ltr">ocp-build uses a trick to s=
peed-up compilations with camlp4: it preprocesses every file only once, and=
 then uses the generated file (a binary version of the file AST) with ocaml=
dep, ocamlc and ocamlopt. It usually means a x3 speedup.<div>


<br></div><div>--Fabrice</div></div><div class=3D"gmail_extra"><div><div cl=
ass=3D"h5"><br><br><div class=3D"gmail_quote">On Wed, Apr 2, 2014 at 10:34 =
PM, Daniel B=FCnzli <span dir=3D"ltr">&lt;<a href=3D"mailto:daniel.buenzli@=
erratique.ch" target=3D"_blank">daniel.buenzli@erratique.ch</a>&gt;</span> =
wrote:<br>


<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex"><br>
<br>
Le mercredi, 2 avril 2014 =E0 22:14, Anders Peter Fugmann a =E9crit :<br>
<div><br>
&gt; Is there any way to use a optimized version of camlp4.<br>
<br>
</div>Not sure that this will work as it it not mentioned in the documentat=
ion [1] but did you try to add<br>
<br>
camlp4=3D&quot;camlp4.opt&quot;<br>
<br>
in .opam/$SWITCH/lib/findlib.conf (or wherever it is on your machine).<br>
<br>
Best,<br>
<br>
Daniel<br>
<br>
[1] <a href=3D"http://projects.camlcity.org/projects/dl/findlib-1.4.1/doc/r=
ef-html/r775.html" target=3D"_blank">http://projects.camlcity.org/projects/=
dl/findlib-1.4.1/doc/ref-html/r775.html</a><br>
<div><div><br>
<br>
<br>
--<br>
Caml-list mailing list. =A0Subscription management and archives:<br>
<a href=3D"https://sympa.inria.fr/sympa/arc/caml-list" target=3D"_blank">ht=
tps://sympa.inria.fr/sympa/arc/caml-list</a><br>
Beginner&#39;s list: <a href=3D"http://groups.yahoo.com/group/ocaml_beginne=
rs" target=3D"_blank">http://groups.yahoo.com/group/ocaml_beginners</a><br>
Bug reports: <a href=3D"http://caml.inria.fr/bin/caml-bugs" target=3D"_blan=
k">http://caml.inria.fr/bin/caml-bugs</a></div></div></blockquote></div><br=
><br clear=3D"all"><div><br></div></div></div><span class=3D"HOEnZb"><font =
color=3D"#888888">-- <br>

Fabrice LE FESSANT<br>Chercheur en Informatique<br>
INRIA Paris Rocquencourt -- OCamlPro<br>Programming Languages and Distribut=
ed Systems
</font></span></div>
</blockquote></div><br></div>

--001a11337d4ad787aa04f6157dc5--
