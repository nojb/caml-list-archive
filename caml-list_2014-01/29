Return-Path: <yotambarnoy@gmail.com>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail3-relais-sop.national.inria.fr (mail3-relais-sop.national.inria.fr [192.134.164.104])
	by sympa.inria.fr (Postfix) with ESMTPS id A77CF7EE99
	for <caml-list@sympa.inria.fr>; Wed,  8 Jan 2014 03:35:32 +0100 (CET)
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  yotambarnoy@gmail.com) identity=pra; client-ip=209.85.128.43;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="yotambarnoy@gmail.com";
  x-sender="yotambarnoy@gmail.com";
  x-conformance=sidf_compatible
Received-SPF: Pass (mail3-smtp-sop.national.inria.fr: domain of
  yotambarnoy@gmail.com designates 209.85.128.43 as permitted
  sender) identity=mailfrom; client-ip=209.85.128.43;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="yotambarnoy@gmail.com";
  x-sender="yotambarnoy@gmail.com";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@mail-qe0-f43.google.com) identity=helo;
  client-ip=209.85.128.43;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="yotambarnoy@gmail.com";
  x-sender="postmaster@mail-qe0-f43.google.com";
  x-conformance=sidf_compatible
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Au4DAG+4zFLRVYArlWdsb2JhbABZg0NVsRuIVoEHCBYOAQEBAQcNCQkSKoIlAQEBAwFAARQHEQwBAwELBgULAzgiAREBBQEcBhMJEodUAQMJCA2dV4xcgwmRLQoZJw1khCEBBQyOUiYHhDcEiUOMa4FpgTCOeBgphHce
X-IPAS-Result: Au4DAG+4zFLRVYArlWdsb2JhbABZg0NVsRuIVoEHCBYOAQEBAQcNCQkSKoIlAQEBAwFAARQHEQwBAwELBgULAzgiAREBBQEcBhMJEodUAQMJCA2dV4xcgwmRLQoZJw1khCEBBQyOUiYHhDcEiUOMa4FpgTCOeBgphHce
X-IronPort-AV: E=Sophos;i="4.95,621,1384297200"; 
   d="scan'208";a="43911511"
Received: from mail-qe0-f43.google.com ([209.85.128.43])
  by mail3-smtp-sop.national.inria.fr with ESMTP/TLS/RC4-SHA; 08 Jan 2014 03:35:31 +0100
Received: by mail-qe0-f43.google.com with SMTP id jy17so1223418qeb.16
        for <caml-list@inria.fr>; Tue, 07 Jan 2014 18:35:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:from:date:message-id:subject:to
         :cc:content-type;
        bh=FEpl75kUrHS4k8XsEHCdgyv4HX3wXsjzhEZZE8612Qo=;
        b=RJuBzZdZXPNq2FQCSHVX6htZvjuX2jKwraEulUZvbukxJ23rXyt9PpLvwMf1mSe3tp
         YtrCNPNoo57FGSyUpZktAdG0uvzwyp35gyQ2LTPzMJvuLbzPs9HClX5hqyy/yMAjd1tX
         NbwvDlwWQhbdQapALwTrrTiP8uKwsZPzWvo53/cWRLXt0fbBT4ZUjvVTn5PbK1hPYDFK
         4EGjKOgUYbNrJb0h4WOO9+hE1+iLwXwI/3vssezJ0tApuZLqsizoQGlaEidhxogFBE9k
         LYMfRbtTVBl1OsQ8zuJnrUdUskyAP/Zi7Ar0rb4crNbpQKBgCWjjt3t/qjQsELXfFky2
         ZlFQ==
X-Received: by 10.49.25.46 with SMTP id z14mr10818749qef.20.1389148529947;
 Tue, 07 Jan 2014 18:35:29 -0800 (PST)
MIME-Version: 1.0
Received: by 10.224.95.8 with HTTP; Tue, 7 Jan 2014 18:35:09 -0800 (PST)
In-Reply-To: <1389126940.2692.4.camel@zotac>
References: <CAN6ygOnW9bqcB3SeZiqgxFtPuqt2PXJ0-EBRS7Na9M0S6fT3KQ@mail.gmail.com>
 <1389126940.2692.4.camel@zotac>
From: Yotam Barnoy <yotambarnoy@gmail.com>
Date: Tue, 7 Jan 2014 21:35:09 -0500
Message-ID: <CAN6ygOmhe4CFXcBFLMJ-5R3RF8puwRc167CgXiditC8EywvmxA@mail.gmail.com>
To: Gerd Stolpmann <info@gerd-stolpmann.de>
Cc: Ocaml Mailing List <caml-list@inria.fr>
Content-Type: multipart/alternative; boundary=047d7b5d9b99aafa8604ef6c582b
Subject: Re: [Caml-list] Concurrent/parallel programming

--047d7b5d9b99aafa8604ef6c582b
Content-Type: text/plain; charset=ISO-8859-1

Thanks for the links and info, everyone.

Gerd, would it be possible to put netmulticore up on opam? I realize this
is a sensitive topic for you, but from what I can tell, this is the most
comprehensive and efficient solution to parallel programming that exists
for ocaml, so why not make it as easily available as possible?

Also, regarding the ocaml_modify() and ocaml_initialize() regression in
4.01 -- yikes! Is there any way to get support back for writing outside of
the ocaml heap? This seems like a pretty big deal! (Sorry if I'm arriving
late for whatever discussion took place about this before).

-Yotam


On Tue, Jan 7, 2014 at 3:35 PM, Gerd Stolpmann <info@gerd-stolpmann.de>wrote:

> There is Netmulticore, a part of Ocamlnet:
>
>
> http://projects.camlcity.org/projects/dl/ocamlnet-3.7.3/doc/html-main/Intro.html#ch_comp
>
> It utilizes shared memory, and accesses it from several processes. There
> is no C code involved, but it is fairly unsafe nevertheless, because you
> need to stick to certain programming rules, or the program crashes.
> However, if you manage to encapsulate all the unsafe things, it is a
> good option. I'm using Netmulticore in the Plasma Map/Reduce
> implementation.
>
> Gerd
>
> Am Dienstag, den 07.01.2014, 14:54 -0500 schrieb Yotam Barnoy:
> > Hi List
> >
> >
> > So far, I've been programming in ocaml using only sequential programs.
> > In my last project, which was an implementation of a large machine
> > learning algorithm, I tried to speed up computation using a little bit
> > of parallelism with ParMap, and it was a complete failure. It's
> > possible that more time would have yielded better results, but I just
> > didn't have the time to invest in it given how bad the initial results
> > were.
> >
> >
> > My question is, what are the options right now as far as parallelism
> > is concerned? I'm not talking about cooperative multitasking, but
> > about really taking advantage of multiple cores. I'm well aware of the
> > runtime lock and I'm ok with message passing between processes or a
> > shared area in memory, but I'd rather have something more high level
> > than starting up several processes, creating a named pipe or a socket,
> > and trying to pass messages through that. Also, I assume that using a
> > shared area in memory involves some C code? Am I wrong about that?
> >
> >
> > I was expecting Core's Async to fill this role, but realworldocaml is
> > fuzzy on this topic, apparently preferring to dwell on cooperative
> > multitasking (which is fine but not what I'm looking for), and I
> > couldn't find any other documentation that was clearer.
> >
> >
> > Thanks
> >
> > Yotam
> >
>
> --
> ------------------------------------------------------------
> Gerd Stolpmann, Darmstadt, Germany    gerd@gerd-stolpmann.de
> My OCaml site:          http://www.camlcity.org
> Contact details:        http://www.camlcity.org/contact.html
> Company homepage:       http://www.gerd-stolpmann.de
> ------------------------------------------------------------
>

--047d7b5d9b99aafa8604ef6c582b
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

<div dir=3D"ltr"><div>Thanks for the links and info, everyone.<br><br>Gerd,=
 would it be possible to put netmulticore up on opam? I realize this is a s=
ensitive topic for you, but from what I can tell, this is the most comprehe=
nsive and efficient solution to parallel programming that exists for ocaml,=
 so why not make it as easily available as possible?<br>

<br>Also, regarding the ocaml_modify() and ocaml_initialize() regression in=
 4.01 -- yikes! Is there any way to get support back for writing outside of=
 the ocaml heap? This seems like a pretty big deal! (Sorry if I&#39;m arriv=
ing late for whatever discussion took place about this before).<br>

<br></div>-Yotam<br>
</div><div class=3D"gmail_extra"><br><br><div class=3D"gmail_quote">On Tue,=
 Jan 7, 2014 at 3:35 PM, Gerd Stolpmann <span dir=3D"ltr">&lt;<a href=3D"ma=
ilto:info@gerd-stolpmann.de" target=3D"_blank">info@gerd-stolpmann.de</a>&g=
t;</span> wrote:<br>

<blockquote class=3D"gmail_quote" style=3D"margin:0 0 0 .8ex;border-left:1p=
x #ccc solid;padding-left:1ex">There is Netmulticore, a part of Ocamlnet:<b=
r>
<br>
<a href=3D"http://projects.camlcity.org/projects/dl/ocamlnet-3.7.3/doc/html=
-main/Intro.html#ch_comp" target=3D"_blank">http://projects.camlcity.org/pr=
ojects/dl/ocamlnet-3.7.3/doc/html-main/Intro.html#ch_comp</a><br>
<br>
It utilizes shared memory, and accesses it from several processes. There<br>
is no C code involved, but it is fairly unsafe nevertheless, because you<br>
need to stick to certain programming rules, or the program crashes.<br>
However, if you manage to encapsulate all the unsafe things, it is a<br>
good option. I&#39;m using Netmulticore in the Plasma Map/Reduce<br>
implementation.<br>
<br>
Gerd<br>
<br>
Am Dienstag, den 07.01.2014, 14:54 -0500 schrieb Yotam Barnoy:<br>
<div class=3D"HOEnZb"><div class=3D"h5">&gt; Hi List<br>
&gt;<br>
&gt;<br>
&gt; So far, I&#39;ve been programming in ocaml using only sequential progr=
ams.<br>
&gt; In my last project, which was an implementation of a large machine<br>
&gt; learning algorithm, I tried to speed up computation using a little bit=
<br>
&gt; of parallelism with ParMap, and it was a complete failure. It&#39;s<br>
&gt; possible that more time would have yielded better results, but I just<=
br>
&gt; didn&#39;t have the time to invest in it given how bad the initial res=
ults<br>
&gt; were.<br>
&gt;<br>
&gt;<br>
&gt; My question is, what are the options right now as far as parallelism<b=
r>
&gt; is concerned? I&#39;m not talking about cooperative multitasking, but<=
br>
&gt; about really taking advantage of multiple cores. I&#39;m well aware of=
 the<br>
&gt; runtime lock and I&#39;m ok with message passing between processes or =
a<br>
&gt; shared area in memory, but I&#39;d rather have something more high lev=
el<br>
&gt; than starting up several processes, creating a named pipe or a socket,=
<br>
&gt; and trying to pass messages through that. Also, I assume that using a<=
br>
&gt; shared area in memory involves some C code? Am I wrong about that?<br>
&gt;<br>
&gt;<br>
&gt; I was expecting Core&#39;s Async to fill this role, but realworldocaml=
 is<br>
&gt; fuzzy on this topic, apparently preferring to dwell on cooperative<br>
&gt; multitasking (which is fine but not what I&#39;m looking for), and I<b=
r>
&gt; couldn&#39;t find any other documentation that was clearer.<br>
&gt;<br>
&gt;<br>
&gt; Thanks<br>
&gt;<br>
&gt; Yotam<br>
&gt;<br>
<br>
</div></div><span class=3D"HOEnZb"><font color=3D"#888888">--<br>
------------------------------------------------------------<br>
Gerd Stolpmann, Darmstadt, Germany =A0 =A0<a href=3D"mailto:gerd@gerd-stolp=
mann.de">gerd@gerd-stolpmann.de</a><br>
My OCaml site: =A0 =A0 =A0 =A0 =A0<a href=3D"http://www.camlcity.org" targe=
t=3D"_blank">http://www.camlcity.org</a><br>
Contact details: =A0 =A0 =A0 =A0<a href=3D"http://www.camlcity.org/contact.=
html" target=3D"_blank">http://www.camlcity.org/contact.html</a><br>
Company homepage: =A0 =A0 =A0 <a href=3D"http://www.gerd-stolpmann.de" targ=
et=3D"_blank">http://www.gerd-stolpmann.de</a><br>
------------------------------------------------------------<br>
</font></span></blockquote></div><br></div>

--047d7b5d9b99aafa8604ef6c582b--
