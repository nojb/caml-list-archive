Received: from mail4-relais-sop.national.inria.fr (mail4-relais-sop.national.inria.fr [192.134.164.105])
	by walapai.inria.fr (8.13.6/8.13.6) with ESMTP id q2C0chFx006243
	for <caml-list@sympa-roc.inria.fr>; Mon, 12 Mar 2012 01:38:43 +0100
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: Ar0CAFxEXU+GoCGihWdsb2JhbABCgwmCLrAxAQEBCgsLBRYnggkBAQQBIw8BBUYLCxgCAgUhAgIPAhA2EwYCAQGIAQULqDiQf4EviBWEG4IMgRYEiFKMeoVphUKHag
X-IronPort-AV: E=Sophos;i="4.73,568,1325458800"; 
   d="scan'208";a="135509196"
Received: from postman2.riken.jp (HELO postman.riken.jp) ([134.160.33.162])
  by mail4-smtp-sop.national.inria.fr with ESMTP; 12 Mar 2012 01:38:36 +0100
Received: from postman.riken.jp (postman2.riken.jp [127.0.0.1])
	by postman.riken.jp (Postfix) with SMTP id 03E9B1260253
	for <caml-list@inria.fr>; Mon, 12 Mar 2012 09:38:34 +0900 (JST)
Received: from [172.27.98.103] (rikad98.riken.jp [134.160.214.98])
	by postman.riken.jp (Postfix) with ESMTPA id DB71D1270063
	for <caml-list@inria.fr>; Mon, 12 Mar 2012 09:38:33 +0900 (JST)
Message-ID: <4F5D4589.40206@riken.jp>
Date: Mon, 12 Mar 2012 09:38:33 +0900
From: Francois Berenger <berenger@riken.jp>
User-Agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.27) Gecko/20120216 Thunderbird/3.1.19
MIME-Version: 1.0
To: caml-list@inria.fr
References: <1991A512A37E49ACA5AAD30A38D628BF@erratique.ch> <slrnjlgric.7tu.sylvain@gallu.homelinux.org> <E201E8FA661141D89910CC9F1EE84160@erratique.ch> <CAOCAUGMSw26s2m4-a9t98Mx+c43wyNcOjtHauj-OC8Mh6-w+Mg@mail.gmail.com> <CAP5QFJkrdzRKx8t7rWoXTQhYO1dV1hKX_6ZsEVDTcTUBT97Fxw@mail.gmail.com> <CAOCAUGNbhPA-WDy55rnciOLEz701JyuyByMrxmyy6Y_8=aSQ3g@mail.gmail.com> <DD8AC4F3-F9B3-4DBA-8D4A-E82A6F2849A6@recoil.org>
In-Reply-To: <DD8AC4F3-F9B3-4DBA-8D4A-E82A6F2849A6@recoil.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-PMX-Version: 5.6.0.2009776, Antispam-Engine: 2.7.2.376379, Antispam-Data: 2012.3.10.112716
Subject: Re: [Caml-list] Re: oasis packaging questions

On 03/09/2012 09:22 PM, Anil Madhavapeddy wrote:
> On 8 Mar 2012, at 22:26, Sylvain Le Gall wrote:
>>
>> 2012/3/8 Adrien<camaradetux@gmail.com>:
>>> Hi,
>>>
>>> On 08/03/2012, Sylvain Le Gall<sylvain@le-gall.net>  wrote:
>>>> Hi,
>>>>
>>>> 2012/3/8 Daniel Bünzli<daniel.buenzli@erratique.ch>:
>>>>> Le jeudi, 8 mars 2012 ŕ 09:31, Sylvain Le Gall a écrit :
>>>>>> setup.ml will be enough for me ;-) But I am biased.
>>>>>
>>>>> For distribution, I'm fine with that aswell. For developement setup.ml
>>>>> takes too much time to invoke (adds an overhead of 0.5s on my system).
>>>>>
>>>>
>>>> That the parsing time because the file is big. I know this issue and
>>>> will try to improve that in the future. I think a 50% down size is
>>>> possible, that will bring this time to 250ms. Although, I don't think
>>>> that even for development env a 500ms delay is that big... I doubt to
>>>> be able to reduce to ~0s.
>>>
>>> For my own stuff, I've been using a Makefile which includes a rule to
>>> (re)compile setup.ml into an executable with ocamlc.opt (compiling
>>> with ocamlopt was too slow). My usual development machine isn't
>>> terribly fast and this has helped a lot.
>>>
>>> I think there was a mention of an issue though but it can help a lot.
>>
>> Make sense. So super quick hack!
>>
>> Add at the beginning of setup.ml:
>
> A Makefile works just fine (and making the autogenerated code less complex
> rather than more would be better).

May I suggest to generate an OcamlMakefile instead of a plain Makefile? :)
It might be simpler to generate, I think.

> This is the template Makefile I use:
> https://github.com/avsm/ocaml-github/blob/master/Makefile
>
> -anil
>

