Received: (from majordomo@localhost) by pauillac.inria.fr (8.7.6/8.7.3) id KAA15634; Mon, 10 May 2004 10:21:59 +0200 (MET DST)
Received: from concorde.inria.fr (concorde.inria.fr [192.93.2.39]) by pauillac.inria.fr (8.7.6/8.7.3) with ESMTP id KAA16107 for <caml-list@pauillac.inria.fr>; Mon, 10 May 2004 10:21:58 +0200 (MET DST)
Received: from venus.is.s.u-tokyo.ac.jp (venus.is.s.u-tokyo.ac.jp [133.11.12.9])
	by concorde.inria.fr (8.12.10/8.12.10) with ESMTP id i4A8LtSH012580
	for <caml-list@inria.fr>; Mon, 10 May 2004 10:21:56 +0200
Received: from tuba.is.s.u-tokyo.ac.jp (tuba.is.s.u-tokyo.ac.jp [133.11.12.102])
	by venus.is.s.u-tokyo.ac.jp (8.11.6p3/3.7W) with ESMTP id i4A8Lrt20955
	for <caml-list@inria.fr>; Mon, 10 May 2004 17:21:53 +0900 (JST)
Received: (from oiwa@localhost)
	by tuba.is.s.u-tokyo.ac.jp (8.11.6+Sun/3.7W) id i4A8Lrf21952;
	Mon, 10 May 2004 17:21:53 +0900 (JST)
X-Authentication-Warning: tuba.is.s.u-tokyo.ac.jp: oiwa set sender to oiwa@yl.is.s.u-tokyo.ac.jp using -f
To: caml-list@inria.fr
Subject: Re: [Caml-list] Building findlib/OCamlfind on Win32 system
References: <409F1A40.8080407@lophty.com>
MIME-Version: 1.0 (generated by SEMI 1.14.3 - "Ushinoya")
Content-Type: text/plain; charset=US-ASCII
From: Yutaka OIWA <oiwa@yl.is.s.u-tokyo.ac.jp>
Date: Mon, 10 May 2004 17:21:52 +0900
In-Reply-To: <409F1A40.8080407@lophty.com>
 (brian donovan's message of "Mon, 10 May 2004 13:59:28 +0800")
Message-ID: <vfin04gk7z3.fsf@tuba.is.s.u-tokyo.ac.jp>
Lines: 63
User-Agent: T-gnus/6.15.6 (based on Oort Gnus v0.06) (revision 01)
 SEMI/1.14.3 (Ushinoya) FLIM/1.14.3 (=?ISO-8859-4?Q?Unebigory=F2mae?=)
 APEL/10.2 Emacs/20.7 (sparc-sun-solaris2.8) MULE/4.0 (HANANOEN)
X-Miltered: at concorde with ID 409F3BA3.001 by Joe's j-chkmail (http://j-chkmail.ensmp.fr)!
X-Loop: caml-list@inria.fr
X-Spam: no; 0.00; caml-list:01 findlib:01 ocamlfind:01 yutaka:01 oiwa:01 oiwa:01 u-tokyo:01 2004:99 beginners:01 yutaka:01 findlib:01 caml-list:01 who've:01 newbie:01 mingw:01 
Sender: owner-caml-list@pauillac.inria.fr
Precedence: bulk

Hello brian,

>> On Mon, 10 May 2004 13:59:28 +0800, brian donovan <lists@lophty.com> said:

brian> Hello,
brian> I posted this query to ocaml_beginners a few days ago and have received 
brian> no replies as of yet.  Likewise my email to Yutaka Oiwa, the creator of 
brian> the patch mentioned below.  I haven't approached findlib's author as he 
brian> stated in the INSTALL file accompanying the findlib package that he does 
brian> not have access to Windows systems or tools.  I'm reposting here in the 
brian> hopes that there may be other Win32 OCaml users on Caml-list who've 
brian> installed findlib ....

I'm sorry I have missed your direct inquery.
I have just drown in the sea of spams these days...

brian> I'm an OCaml newbie (actually, I'm new to functional languages 
brian> altogether and, for all intents and purposes, to compiled languages as 
brian> well).  I've installed the standalone MinGW port of OCaml 3.0.7 on a 
brian> WinXP system for learning purposes.

...

brian> with MinGW port of OCaml.  I downloaded findlib 0.8.1 and the patch 
brian> (from here : 
brian> <http://www.ocaml-programming.de/packages/index-alt.html>).  I extracted 
brian> the tarball, pasted the patch file into the top findlib directory and 
brian> applied the patch (I've got the Cygwin toolchain installed).  Patch 
brian> complained about an error when I applied it initially and suggested that 
...

brian> The rest of the build went fine : ./configure, make all, make opt, make 
brian> install, and make clean (as recommended in the INSTALL file bundled with 
brian> findlib).  I tried using findlib.  Nothing seemed to work except the 
brian> command findlib ocamlbrowser, which launched a little 4 pane gui that 
brian> listed most (but not all?) of the modules/libraries in the lib directory 
brian> of my OCaml install (stublibs, labltk, findlib itself, forex were not 
brian> visible - shouldn't they be?).  Trying other commands, like "ocamlfind 
brian> query Unix" or "ocamlfind query Array" or "ocamlfind list" gave me nada 
brian> - just a fresh prompt.

One possibility is simply that the findlib 0.8.1 does not work properly
with OCaml 3.0.7. This is due to the changed (maybe undocumented)
semantics of the Arg module from OCaml core library.
This problem is already fixed in the newer versions of the original findlib.

I had written an ad-hoc patch to findlib 0.8.1 before new official
findlib was released. That is obsoleted but left as-is at
http://www.yl.is.s.u-tokyo.ac.jp/~oiwa/pub/caml/frontend.ml.ocaml307.patch .
This patch was written with CVS versions of OCaml between 3.0.6 and 3.0.7,
so it may work or may not work with current 3.0.7, but you can try anyway.
Possibly the better way is to backport the corresponding portion of
code from current findlib, or to port my patch into newer findlib.

Unfortunately, I am currently not using OCaml/mingw deeply,
so the patch mentioned above is not maintained heavily.
If you succeed to fix the problem, please tell me.

-- 
Yutaka Oiwa              Yonezawa Lab., Dept. of Computer Science,
      Graduate School of Information Sci. & Tech., Univ. of Tokyo.
                    <oiwa@yl.is.s.u-tokyo.ac.jp>, <yutaka@oiwa.jp>
PGP fingerprint = C9 8D 5C B8 86 ED D8 07  EA 59 34 D8 F4 65 53 61

-------------------
To unsubscribe, mail caml-list-request@inria.fr Archives: http://caml.inria.fr
Bug reports: http://caml.inria.fr/bin/caml-bugs FAQ: http://caml.inria.fr/FAQ/
Beginner's list: http://groups.yahoo.com/group/ocaml_beginners

