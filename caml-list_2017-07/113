Return-Path: <berenger@bioreg.kyushu-u.ac.jp>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail2-relais-roc.national.inria.fr (mail2-relais-roc.national.inria.fr [192.134.164.83])
	by sympa.inria.fr (Postfix) with ESMTPS id 4DA117FEE7
	for <caml-list@sympa.inria.fr>; Thu, 27 Jul 2017 03:07:16 +0200 (CEST)
Authentication-Results: mail2-smtp-roc.national.inria.fr; spf=None smtp.pra=berenger@bioreg.kyushu-u.ac.jp; spf=None smtp.mailfrom=berenger@bioreg.kyushu-u.ac.jp; spf=None smtp.helo=postmaster@h4.hosting4.cc.kyushu-u.ac.jp
Received-SPF: None (mail2-smtp-roc.national.inria.fr: no sender
  authenticity information available from domain of
  berenger@bioreg.kyushu-u.ac.jp) identity=pra;
  client-ip=133.5.13.5;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="berenger@bioreg.kyushu-u.ac.jp";
  x-sender="berenger@bioreg.kyushu-u.ac.jp";
  x-conformance=sidf_compatible
Received-SPF: None (mail2-smtp-roc.national.inria.fr: no sender
  authenticity information available from domain of
  berenger@bioreg.kyushu-u.ac.jp) identity=mailfrom;
  client-ip=133.5.13.5;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="berenger@bioreg.kyushu-u.ac.jp";
  x-sender="berenger@bioreg.kyushu-u.ac.jp";
  x-conformance=sidf_compatible
Received-SPF: None (mail2-smtp-roc.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@h4.hosting4.cc.kyushu-u.ac.jp) identity=helo;
  client-ip=133.5.13.5;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="berenger@bioreg.kyushu-u.ac.jp";
  x-sender="postmaster@h4.hosting4.cc.kyushu-u.ac.jp";
  x-conformance=sidf_compatible
IronPort-PHdr: =?us-ascii?q?9a23=3AaDcu7R/PF4DJ+v9uRHKM819IXTAuvvDOBiVQ1KB3?=
 =?us-ascii?q?1uIcTK2v8tzYMVDF4r011RmSDNWds6oMotGVmpioYXYH75eFvSJKW713fDhBt/?=
 =?us-ascii?q?8rmRc9CtWOE0zxIa2iRSU7GMNfSA0tpCnjYgBaF8nkelLdvGC54yIMFRXjLwp1?=
 =?us-ascii?q?Ifn+FpLPg8it2e2//57ebx9UiDahfLh/MAi4oQLNu8cMnIBsMLwxyhzHontJf+?=
 =?us-ascii?q?RZ22ZlLk+Nkhj/+8m94odt/zxftPw9+cFAV776f7kjQrxDEDsmKWE169b1uhTF?=
 =?us-ascii?q?UACC+2ETUmQSkhpPHgjF8BT3VYr/vyfmquZw3jSRMsrqQL06Wzmv4b5nRAPnhS?=
 =?us-ascii?q?waMzI08H3bhsl2galGohyuugZ/zpbJbo+LOvpwfqDTc90USmVOXMleSyNPD5ig?=
 =?us-ascii?q?b4YNFecNIfpUoof/qlYIsBCwBROsBOTqyjJQhnH2x7c10+I9HgHB3QwgBM8FvW?=
 =?us-ascii?q?nbotvpO6kcSeG7wqbUwz7eaP5Zwiny6JLWfRAnrvGDQ6hwfNHKxkkuEAPFlEuf?=
 =?us-ascii?q?qYP/MzOW1uUNrnOb7+p9Ve62lm4rsRt+rSS1yscukonEn4QYwU3K+yV+xYY6P9?=
 =?us-ascii?q?y4SEhjbN6rEZtQqyGaN5ZtTc84X25ovyM6x7sbspC4ZCgH0IkryhDRZvCdc4WE?=
 =?us-ascii?q?+A/vWeiLLTp4nH5pZbyyihio/UWg0OHwSNS43VVQoiZYndTBtXYA3AHJ5MedUP?=
 =?us-ascii?q?ty5EKh1C6P1w/N7uFEJlg5larUJpI7wr4wkYETsVjCHi/wl0X7g7WaeVk49eSy?=
 =?us-ascii?q?6OTmYqjmpoScN49pkw3+L74ildajDugiMAgOR3CX+eW61LL94U30WKhGg/M4n6?=
 =?us-ascii?q?XDsJ3WP9kXq6CjDwJVyooj7gywDzai0NQWh3kHK1dFdQqcgIf3IVHBPvb4Dfih?=
 =?us-ascii?q?jFS2izpk3PHGPrr7AprTIXjPirThfLZg605HyAoz0MlT549OBr4bPP3/QE3xtM?=
 =?us-ascii?q?TAAh8jLwO02/rnCMl61o4GRW2AGKqZMKfLvV+M5+IvOPWMaZQOuDf9Lvgl/+Th?=
 =?us-ascii?q?gWU4mV8bZ6mp3IEYZGq2HvR8cA2lZi/ni9IFVGMLpRYWTerwiVTEXyQASWy1Wv?=
 =?us-ascii?q?cS/Dg9A4WnFs/pa7qAppOs5m/vFJBMa2ZJB0qkG3bvbYiLHfQddTmSP4p81DUP?=
 =?us-ascii?q?E7q5HdxynSqyvRP3nuI0ZtHf/TcV4M+72Q=3D=3D?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0ClAwCLO3lZlwUNBYVdHAEBBAEBCgEBF?=
 =?us-ascii?q?wEBBAEBCgEBhBMDkBGmeQ6CBAEnhR8ChA8XAQEBAQEBAQEBAQESAQEBAQEGGAZ?=
 =?us-ascii?q?XQg6BYwwMgk4DAyMVUSUCJgICHzgTCAEBiioRsH6CJodtGoM8AQEIAgEgBYELg?=
 =?us-ascii?q?h2FWYJ5hD0DARIBa4JHgmEFh1MHihaNax6HMYNLiQiLMYcJlXAgAYE1C4EMhW8?=
 =?us-ascii?q?lgV2GGYFSgjEBAQE?=
X-IPAS-Result: =?us-ascii?q?A0ClAwCLO3lZlwUNBYVdHAEBBAEBCgEBFwEBBAEBCgEBhBM?=
 =?us-ascii?q?DkBGmeQ6CBAEnhR8ChA8XAQEBAQEBAQEBAQESAQEBAQEGGAZXQg6BYwwMgk4DA?=
 =?us-ascii?q?yMVUSUCJgICHzgTCAEBiioRsH6CJodtGoM8AQEIAgEgBYELgh2FWYJ5hD0DARI?=
 =?us-ascii?q?Ba4JHgmEFh1MHihaNax6HMYNLiQiLMYcJlXAgAYE1C4EMhW8lgV2GGYFSgjEBA?=
 =?us-ascii?q?QE?=
X-IronPort-AV: E=Sophos;i="5.40,417,1496095200"; 
   d="scan'208";a="285077584"
Received: from hosting4.cc.kyushu-u.ac.jp (HELO h4.hosting4.cc.kyushu-u.ac.jp) ([133.5.13.5])
  by mail2-smtp-roc.national.inria.fr with ESMTP; 27 Jul 2017 03:07:14 +0200
Received: from [192.168.2.36] (unknown [133.5.218.148])
	(using TLSv1.2 with cipher DHE-RSA-AES128-SHA (128/128 bits))
	(No client certificate requested)
	(Authenticated sender: berenger@bioreg.kyushu-u.ac.jp)
	by h4.hosting4.cc.kyushu-u.ac.jp (hde-lc-postfix) with ESMTPSA id E91B42AB0F5;
	Thu, 27 Jul 2017 10:07:09 +0900 (JST)
	(envelope-from berenger@bioreg.kyushu-u.ac.jp)
To: caml-list@inria.fr
References: <20170703140437.8FFD7121499@mcclellan.cs.miami.edu>
 <978f88e8-6e9c-9f54-5988-0933a4cac833@bioreg.kyushu-u.ac.jp>
From: Francois BERENGER <berenger@bioreg.kyushu-u.ac.jp>
Message-ID: <3fa04233-6e26-fdd6-62f3-f09cbae1605d@bioreg.kyushu-u.ac.jp>
Date: Thu, 27 Jul 2017 10:07:09 +0900
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101
 Thunderbird/52.2.1
MIME-Version: 1.0
In-Reply-To: <978f88e8-6e9c-9f54-5988-0933a4cac833@bioreg.kyushu-u.ac.jp>
Content-Type: text/plain; charset=utf-8; format=flowed
Content-Language: en-US
Content-Transfer-Encoding: 7bit
Subject: [Caml-list] new release of parany (1.0.2): a minimalistic OCaml
 library to parallelize any kind of computation

Dear caml riders,

There is a new version of parany available in opam: 1.0.2.

I use parany intensively these days and have not seen it crash, so it
might be ready for production use.
My results are equal in the case of a parallel or a sequential run.

Note to potential users: parany doen't try to preserve the order
of the elements it processes in parallel (to maximize performance).
The elements to process must be independent (same thing if you were 
using parmap).

The code is here:
https://github.com/UnixJunkie/parany

Here are some parallelization performance results on a real use case:
---
#nprocs med_processing_frequency_5runs(Hz) theoric_max(Hz) efficacy(%)
1 20.1996 20.1996 1.00
2 39.7312 40.3992 0.98
3 52.5495 60.5988 0.87
4 75.1963 80.7984 0.93
5 87.5909 100.9980 0.87
6 107.1065 121.1976 0.88
7 118.8431 141.3972 0.84
8 137.8433 161.5967 0.85
9 148.3669 181.7963 0.82
10 164.9220 201.9959 0.82
11 176.0519 222.1955 0.79
12 192.4726 242.3951 0.79
13 198.2970 262.5947 0.76
14 213.8255 282.7943 0.76
15 224.0193 302.9939 0.74
16 232.4273 323.1935 0.72
---

In this case, with up to four cores, the parallelization performance
is excellent. Efficacy = 1.0 cannot be reached once nprocs > 1
due to Amdahl's law.

The granularity of the computation in my experiment was ~= 0.05s of
CPU time per element in my input file.
So, I guess you might get similar or even better parallelization 
performance if your processing time per element is higher than this.

You can send me a quick email if parany is useful to you.

Happy number crunching,
F.
