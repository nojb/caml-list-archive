Return-Path: <kosmo.zb@gmail.com>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail3-relais-sop.national.inria.fr (mail3-relais-sop.national.inria.fr [192.134.164.104])
	by sympa.inria.fr (Postfix) with ESMTPS id 9EE9A81799
	for <caml-list@sympa.inria.fr>; Wed, 24 Jul 2013 18:17:49 +0200 (CEST)
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  kosmo.zb@gmail.com) identity=pra; client-ip=209.85.217.177;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="kosmo.zb@gmail.com";
  x-sender="kosmo.zb@gmail.com"; x-conformance=sidf_compatible
Received-SPF: Pass (mail3-smtp-sop.national.inria.fr: domain of
  kosmo.zb@gmail.com designates 209.85.217.177 as permitted
  sender) identity=mailfrom; client-ip=209.85.217.177;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="kosmo.zb@gmail.com";
  x-sender="kosmo.zb@gmail.com"; x-conformance=sidf_compatible;
  x-record-type="v=spf1"
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@mail-lb0-f177.google.com) identity=helo;
  client-ip=209.85.217.177;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="kosmo.zb@gmail.com";
  x-sender="postmaster@mail-lb0-f177.google.com";
  x-conformance=sidf_compatible
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AsACAJT971HRVdmxlGdsb2JhbABbgztEDKxFkiqBDggWDgEBAQEHCwsJEiqCJAEBAQQBAj0BGxILAQMMBgULDQ0hIQEBBQwBBQEKBAENBhMSh2sBAw8Mm0qMT4J/hE4KGScDCmSHdAEFDI0JgR4LgQwzB4QAA5UYXoFpgSmKfoNBFimEOzuBNQ
X-IPAS-Result: AsACAJT971HRVdmxlGdsb2JhbABbgztEDKxFkiqBDggWDgEBAQEHCwsJEiqCJAEBAQQBAj0BGxILAQMMBgULDQ0hIQEBBQwBBQEKBAENBhMSh2sBAw8Mm0qMT4J/hE4KGScDCmSHdAEFDI0JgR4LgQwzB4QAA5UYXoFpgSmKfoNBFimEOzuBNQ
X-IronPort-AV: E=Sophos;i="4.89,736,1367964000"; 
   d="scan'208";a="22149310"
Received: from mail-lb0-f177.google.com ([209.85.217.177])
  by mail3-smtp-sop.national.inria.fr with ESMTP/TLS/RC4-SHA; 24 Jul 2013 18:17:48 +0200
Received: by mail-lb0-f177.google.com with SMTP id 10so639140lbf.8
        for <caml-list@inria.fr>; Wed, 24 Jul 2013 09:17:47 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=mime-version:in-reply-to:references:date:message-id:subject:from:to
         :cc:content-type:content-transfer-encoding;
        bh=fFL/ivFTpfBZdMwhsCG3JEIkOA+mW/3wn1INvGUS9UY=;
        b=028h5INABq08bbiDR4PU059fmDs8FO/pWaXq5P7YInnhmgzWOkkiU+fUfzVEy1osAA
         nBfBvWN80VgYvdmXtADBKgzmlDR1hNYM5CU0gzNS+jpBXkiqzYjX2tzVl3gZ3406TVIt
         jKGPGrB6kyfMS9DQ2uh3YjMuGOOL43j6pM6dRvFsvWC8k2sNORUtLhVsibx5rPJ6AS6u
         WwTJCpK3KYRPMkUMmD2KMxm07xdqUmSER3ma3zLHQMrjuifpTm6bURKYcBpew4a7ez3X
         wiQifDlBoMS94RZeofGMX/btwuCigOziV9TuXbbNH7HivZ30oaGUbUQh+55IhNUGxlLJ
         comg==
MIME-Version: 1.0
X-Received: by 10.152.36.6 with SMTP id m6mr2742118laj.65.1374682667618; Wed,
 24 Jul 2013 09:17:47 -0700 (PDT)
Received: by 10.112.202.5 with HTTP; Wed, 24 Jul 2013 09:17:47 -0700 (PDT)
In-Reply-To: <51EFFE3A.30603@gmail.com>
References: <1374669368.25411.5@samsung>
	<1B6BB035-9909-4F0C-9DEA-F713B977A467@ocamlpro.com>
	<51EFFE3A.30603@gmail.com>
Date: Wed, 24 Jul 2013 17:17:47 +0100
Message-ID: <CAAWM5Ty=YOqY+_pwT7qzuPTJg4nByZ6UN9pfes-3WbZJy8z29w@mail.gmail.com>
From: David Sheets <kosmo.zb@gmail.com>
To: Matej Kosik <5764c029b688c1c0d24a2e97cd764f@gmail.com>
Cc: O Caml <caml-list@inria.fr>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Validation-by: kosmo.zb@gmail.com
Subject: Re: AW: [Caml-list] GODI is shutting down

On Wed, Jul 24, 2013 at 5:18 PM, Matej Kosik
<5764c029b688c1c0d24a2e97cd764f@gmail.com> wrote:
> On 24/07/13 15:44, Thomas Gazagnaire wrote:
>>> In the past days I made the experience that OPAM advocates never answer=
 to any of my objections. When I said "GODI has feature xy, why doesn't OPA=
M has this too?" the only response is something like "OPAM has this great G=
ithub-based workflow" (the most harmless variant). Discussion impossible.
>>
>> Let's try to be constructive then. I've tried to look for all your recen=
t objections, let me known if I have missed some.
>>
>> 1. " Instead, there was later questionable behavior from Ocamlpro, namel=
y that they copied (at least parts of) GODI packages, without having asked =
for permission. (In particular, there was evidence that they copied the pac=
kage description texts.) This might be legal, but the reader will understan=
d that this is unfriendly, and unneccessarily aggressive. At that point it =
was clear that they are trying to push GODI aside, even with questionable m=
eans."
>>
>> Some of the initial package descriptions were indeed copied from the des=
cription files of the corresponding GODI packages (which have been often it=
self copied from the author website). I was not aware of this when the desc=
riptions got integrated in the repository, and I've removed them as soon as=
 the issue has been raised on the GODI mailing list [1, 8 oct 2012] and [2,=
 8 oct 2012]. To avoid such issue in the future we are planning to clarify =
the licensing scheme on all the metadata published on the "official reposit=
ory" (we would like to make it public domain if possible, but it's maybe to=
o late).
>>
>> [1] https://godirepo.camlcity.org/pipermail/godi-list/2012-October/00351=
7.html
>> [2] https://godirepo.camlcity.org/pipermail/godi-list/2012-October/00352=
1.html
>>
>> 2. "It doesn't matter that OPAM lacks core functions like deleting all f=
iles when a package is removed"
>>
>> I was very surprised when I've read that (and I though it was just an un=
related rant), but as you seem to insist I guess you are serious. Where did=
 you read that ? Of course, OPAM deletes the files it has installed!
>>
>> - It removes $prefix/lib/<name>, $prefix/doc/<name> (and the other usual=
 paths associated to a package, but keeps $share/<name> for future reinstal=
lations) and it calls whatever removal scripts the user has registered (whi=
ch is 'ocamlfind remove <name>' for most of the packaged libaries -- which =
is still useful when you have C stubs to remove in $prefix/stublibs), and;
>>
>> - It also removes the files specified in an optional `<name>.install` fi=
le located at the root of the directory (which is useful when you have bina=
ries). We have some experimental features to scan the filesystem before and=
 after the installation, and update the corresponding `<name>.install` file=
 with the difference but it's quite slow (because of the filesystem scannin=
g) and this does not work when the number of jobs is greater than 1. But I =
would prefer to let that task to the packagers (or to their build-system, s=
ee for instance that nice omake extension[3])
>>
>> [3] https://github.com/smondet/dircmp/blob/master/OMakeroot#L175
>>
>> 3. "There is the QA question, at least for the main repository"
>>
>> This is on-going work. The first objective was to gather as much package=
s as possible, and to make people start to rely on other people packages in=
stead of restarting each projects from scratch. Now we are starting to focu=
s on the QA side, as Anil already have already told you in a previous email=
, as we slowly replace our old private Jenkins setup by a more advanced, fu=
lly written in OCaml -- but still experimental -- testing platform. Look at=
 the the 4.00.1 on linux results they are the more meaningful for now on, m=
ore than 90% of the packages are working fine (and yes, that's definitely n=
eeds to be improved, but I would say that's not so bad).
>>
>> https://ocaml-www3.ocamllabs.cl.cam.ac.uk/github/OCamlPro/opam-repository
>>
>> Then, as discussed on [4], we plan to select the package with the right =
level of QA to be part of the upcoming "OCaml Platform". The platform itsel=
f will either be a separate repository, or a separate branch or simply a vi=
rtual package in the main repository -- as explained in [4] (and on other t=
hreads of the platform list) the contents of the platform will be driven by=
 QA criteria.
>>
>> [4] http://lists.ocaml.org/pipermail/platform/2013-February/000001.html
>>
>> 4. "how well a library is integrated into the OS"
>>
>> Currently, with a minimal support. We are working on improving that. Loo=
k at the `depext` field in the sqlite3-ocaml package[5], that you can query=
 using the command-line:
>>
>> $ opam install sqlite3-ocaml -e debian,wheezy,amd64
>> libsqlite3-dev
>>
>> The goal is to use that metadata to "drive" the installation/checks of e=
xternal dependencies, depending on the user host and OS. The short-term goa=
l is to display nice error messages though.
>>
>> [5] https://github.com/OCamlPro/opam-repository/blob/master/packages/sql=
ite3-ocaml.2.0.4/opam
>>
>> 5. "lack of windows support and binary packages"
>>
>> OPAM supports for Windows is not so good at the moment indeed. However, =
things are getting better as we are improving the support for windows (we h=
ave a private version which compiles and run OK on cygwin for basic package=
s) and we have an experimental binary support that we are still prototyping=
 [6]. GODI and WODI are clearly in advance in this domain (but I recall tha=
t WODI is a relatively new project).
>>
>> [6]. https://github.com/venator/opam/tree/binary
>>
>> 6. "No, all package managers should unite in this point, and only accept
>> packages with oasis support. (Btw, that's homework for me.) Just do it t=
he
>> same way as we did when requiring findlib."
>>
>> I disagree, people should be free to use whatever system they want.
>
> The above argument, in general, is invalid.

[citation needed]

>>
>> 7. About the generation of OPAM files from _oasis
>>
>> I am not totally convinced by all the arguments I seen so far. Making a =
new release because a package constraint is wrong seems not to be a good id=
ea to me. A large proportion of pull request in the the package metadata's =
repository is about fixing such dependency constraints (which are discovere=
d by our testing tools). I don't have a yet a good story to bring that info=
rmation back into the package, but I'd say that I'm not very fond of mixing=
 everything together: let's keep the dependency constraints part of the pac=
kage system and the build instruction part of the build system -- that's mu=
ch simpler that way.
>>
>> 8. "You are a victim of OPAM's campaign."
>>
>> Sorry, I have no facts to answer here.
>>
>>
>> Best,
>> Thomas
>
>
> --
> Caml-list mailing list.  Subscription management and archives:
> https://sympa.inria.fr/sympa/arc/caml-list
> Beginner's list: http://groups.yahoo.com/group/ocaml_beginners
> Bug reports: http://caml.inria.fr/bin/caml-bugs
