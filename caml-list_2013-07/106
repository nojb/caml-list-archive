Return-Path: <jonathan.protzenko@gmail.com>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail3-relais-sop.national.inria.fr (mail3-relais-sop.national.inria.fr [192.134.164.104])
	by sympa.inria.fr (Postfix) with ESMTPS id 009AC7ED25
	for <caml-list@sympa.inria.fr>; Mon, 15 Jul 2013 17:36:04 +0200 (CEST)
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  jonathan.protzenko@gmail.com) identity=pra;
  client-ip=209.85.192.180;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="jonathan.protzenko@gmail.com";
  x-sender="jonathan.protzenko@gmail.com";
  x-conformance=sidf_compatible
Received-SPF: Pass (mail3-smtp-sop.national.inria.fr: domain of
  jonathan.protzenko@gmail.com designates 209.85.192.180 as
  permitted sender) identity=mailfrom;
  client-ip=209.85.192.180;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="jonathan.protzenko@gmail.com";
  x-sender="jonathan.protzenko@gmail.com";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@mail-pd0-f180.google.com) identity=helo;
  client-ip=209.85.192.180;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="jonathan.protzenko@gmail.com";
  x-sender="postmaster@mail-pd0-f180.google.com";
  x-conformance=sidf_compatible
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AmcBAMUV5FHRVcC0m2dsb2JhbABahw+7LoMegRMWDgEBAQEBBgsLCRQogiMBAQUjDwENARscAQEDDAYFCw0CAgUWCwICCQMCAQIBEREBBQEOAQ0GDQEHAQGHeQEDDgGYOIt/T4J/hCQKGScNZId0AQUMgRqOPgeCWIEgA4klimCDV4YjiUU/hEU
X-IPAS-Result: AmcBAMUV5FHRVcC0m2dsb2JhbABahw+7LoMegRMWDgEBAQEBBgsLCRQogiMBAQUjDwENARscAQEDDAYFCw0CAgUWCwICCQMCAQIBEREBBQEOAQ0GDQEHAQGHeQEDDgGYOIt/T4J/hCQKGScNZId0AQUMgRqOPgeCWIEgA4klimCDV4YjiUU/hEU
X-IronPort-AV: E=Sophos;i="4.89,669,1367964000"; 
   d="scan'208";a="21245488"
Received: from mail-pd0-f180.google.com ([209.85.192.180])
  by mail3-smtp-sop.national.inria.fr with ESMTP/TLS/RC4-SHA; 15 Jul 2013 17:36:03 +0200
Received: by mail-pd0-f180.google.com with SMTP id 10so10739052pdi.39
        for <multiple recipients>; Mon, 15 Jul 2013 08:36:02 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=20120113;
        h=message-id:date:from:user-agent:mime-version:to:cc:subject
         :references:in-reply-to:content-type:content-transfer-encoding;
        bh=M1C45aYbZcKVs/nhAmO6mtLDGSyfuoRcWu/pm3icTSI=;
        b=r8WVjvVG1HwfzjZMxi9LrIKeYevdKZGQlPjcg/gm48RMVsxV382GFZ3g6fjKh8LgMU
         /upXM9N0g7qLO05W6KG2RpsHsvh7XCwSX4qmvdg34tnlDSDyc/GFeTa6Bj7UgQuWycCo
         lpxeL+fbJjsudcbXc8azFLwOQ1k9sxHPp/OVbuDT9FOsSKFmmRfOuZpN8QV1Tx1wgvak
         jDX7ZQh0PJ8VU77wdMRWsDjiEY/aippCLLITq/TBmsmaEB/kxamCc3GZDum/y4eRqTJs
         rXvICA9XnGThAAIUvNQadR9v6gUZi6oz5fHRMX1V0LJKA91HJ8dQ2V2wpg3f/VimH9do
         9ReA==
X-Received: by 10.66.183.196 with SMTP id eo4mr55335897pac.156.1373902562188;
        Mon, 15 Jul 2013 08:36:02 -0700 (PDT)
Received: from [192.168.1.56] ([42.61.222.19])
        by mx.google.com with ESMTPSA id fl2sm65127751pab.23.2013.07.15.08.35.59
        for <multiple recipients>
        (version=TLSv1 cipher=ECDHE-RSA-RC4-SHA bits=128/128);
        Mon, 15 Jul 2013 08:36:00 -0700 (PDT)
Message-ID: <51E41677.2010008@gmail.com>
Date: Mon, 15 Jul 2013 23:34:15 +0800
From: Jonathan Protzenko <jonathan.protzenko@gmail.com>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:25.0) Gecko/20100101 Thunderbird/25.0a1
MIME-Version: 1.0
To: Romain Bardou <romain.bardou@inria.fr>
CC: caml-list@inria.fr, matthieu.dubuget@gmail.com
References: <51E3E70F.9010202@inria.fr> <51E3E975.7020708@gmail.com> <51E3ED83.9040705@gmail.com> <51E4044D.5020303@inria.fr>
In-Reply-To: <51E4044D.5020303@inria.fr>
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
Subject: Re: [Caml-list] OCaml installer on Windows no longer installs
 MinGW?

Hi,

The installer is indeed maintained, but it is slightly outdated. I 
asked the people from Tcl/Tk to provide a "stable" URL, e.g. 
installer-w32-threads-latest.exe, but they could not do it, and hosting 
a copy of the installer myself would be a breach of license, so 
unfortunately, the installer will keep breaking at regular intervals 
because of that. (I guess I could get away with a php script on my 
homepage that emits a Location: header, so that I just have to modify a 
script and not regenerate the installer whenever the URL for the latest 
stable version of tcl/tk changes, but that's more hackish than I was 
hoping for.)

As to the flexdll issue, I'm currently away, but I plan to refresh the 
installer just because of that when I get back.

For the "not all packages got installed by cygwin properly" error, 
please submit a pull request on the install.nsi file, it's really 
trivial to add a new package to the set of those that are installed by 
default. I'm surprised it didn't work by itself, but well.

Finally, for the OASIS-related errors, that's outside the scope of my 
responsibilities as a maintainer of the ocaml installer for windows :-).

Cheers,

jonathan

On Mon 15 Jul 2013 10:16:45 PM SGT, Romain Bardou wrote:
> Le 15/07/2013 14:39, Matthieu Dubuget a écrit :
>> Le 15/07/2013 14:22, Matthieu Dubuget a écrit :
>>> Le 15/07/2013 14:11, Romain Bardou a écrit :
>>>
>>>>
>>>> I have absolutely no clue what to do now. Is the installer from
>>>> protz.github deprecated?
>>> Well. I would say it is a little outdated. It should just be slightly
>>> adapted and recompiled.
>>>
>>
>> I must admit that using OCaml on windows with mingw flavour is not
>> actually a click and work experience…
>>
>> And most of the time, the packages are to be adapted in order to compile.
>>
>> I also hit another problem, that you should be aware of:
>>
>> on my installation, *i686-w64-mingw32-gcc -o toto ...* produces
>> *toto.exe* instead of *toto*.
>> But flexlink has asked for *toto*, and never sees *toto.exe*, which
>> leads to a compilation failure.
>
> Interesting. I managed to compile Cryptokit, LablGTK (this one took me a
> while…) and an application which uses both of them, without the error
> you describe.
>
> Thanks and cheers,
>
