Return-Path: <skaller@users.sourceforge.net>
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on yquem.inria.fr
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=disabled 
	version=3.1.3
X-Original-To: caml-list@yquem.inria.fr
Delivered-To: caml-list@yquem.inria.fr
Received: from concorde.inria.fr (concorde.inria.fr [192.93.2.39])
	by yquem.inria.fr (Postfix) with ESMTP id 8717DBC0A
	for <caml-list@yquem.inria.fr>; Tue, 19 Jun 2007 07:50:49 +0200 (CEST)
Received: from ipmail03.adl2.internode.on.net (ipmail03.adl2.internode.on.net [203.16.214.135])
	by concorde.inria.fr (8.13.6/8.13.6) with ESMTP id l5J5olDN022663
	for <caml-list@inria.fr>; Tue, 19 Jun 2007 07:50:48 +0200
X-IronPort-AV: E=Sophos;i="4.16,437,1175437800"; 
   d="scan'208";a="104863124"
Received: from ppp59-167-2-129.lns1.syd7.internode.on.net (HELO [192.168.1.201]) ([59.167.2.129])
  by ipmail03.adl2.internode.on.net with ESMTP; 19 Jun 2007 15:20:44 +0930
Subject: windows ocaml
From: skaller <skaller@users.sourceforge.net>
To: caml-list <caml-list@inria.fr>
Content-Type: text/plain
Date: Tue, 19 Jun 2007 15:50:42 +1000
Message-Id: <1182232242.29571.157.camel@rosella.wigram>
Mime-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: 7bit
X-Miltered: at concorde with ID 46776EB7.005 by Joe's j-chkmail (http://j-chkmail . ensmp . fr)!
X-Spam: no; 0.00; ocaml:01 ocaml:01 ocamlc:01 bytecode:01 ocamlopt:01 ocamlc:01 bytecode:01 ocamlrun:01 ocamlrun:01 compiler:01 sourceforge:01 native:02 native:02 binding:02 executable:03 

Hi, we're having a terrible time getting ocaml to work properly
on Windows. This is with 3.09 native build.

1. ocamlc makes a bytecode file without an extension, which
cannot be executed. Ocamlopt adds '.exe'. This is inconsistent.

2. ocamlc makes a bytecode file which, when you add .exe
to the end can't exec ocamlrun .. even though it is in the PATH.
ocamlrun filename works fine.

The way our build scripts are set up, we assume the generated
file from a link step is executable (as for native code compiler).
For transparency, the generated bytecode must use the same filename
(.exe must be added) and the bytecode must actually run.

It looks like the bytecode is binding the wrong ocamlrun location,
if the bytecode file is copied to the same directory as contains
ocamlrun, it runs .. otherwise it fails.

-- 
John Skaller <skaller at users dot sf dot net>
Felix, successor to C++: http://felix.sf.net

