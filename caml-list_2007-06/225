Return-Path: <skaller@users.sourceforge.net>
X-Spam-Checker-Version: SpamAssassin 3.1.3 (2006-06-01) on yquem.inria.fr
X-Spam-Level: 
X-Spam-Status: No, score=0.0 required=5.0 tests=none autolearn=disabled 
	version=3.1.3
X-Original-To: caml-list@yquem.inria.fr
Delivered-To: caml-list@yquem.inria.fr
Received: from concorde.inria.fr (concorde.inria.fr [192.93.2.39])
	by yquem.inria.fr (Postfix) with ESMTP id BB687BC0A
	for <caml-list@yquem.inria.fr>; Wed, 13 Jun 2007 14:39:08 +0200 (CEST)
Received: from ipmail03.adl2.internode.on.net (ipmail03.adl2.internode.on.net [203.16.214.135])
	by concorde.inria.fr (8.13.6/8.13.6) with ESMTP id l5DCd6vX026208
	for <caml-list@yquem.inria.fr>; Wed, 13 Jun 2007 14:39:07 +0200
X-IronPort-AV: E=Sophos;i="4.16,416,1175437800"; 
   d="scan'208";a="102577301"
Received: from ppp2-129.lns1.syd7.internode.on.net (HELO [192.168.1.201]) ([59.167.2.129])
  by ipmail03.adl2.internode.on.net with ESMTP; 13 Jun 2007 22:09:21 +0930
Subject: Re: [Caml-list] cywgin stack overflow
From: skaller <skaller@users.sourceforge.net>
To: caml-list@yquem.inria.fr
Cc: Rhythmic Fistman <rfistman@gmail.com>,
	Emmanuel Onzon <emmanuel.onzon@ens-lyon.fr>
In-Reply-To: <1181720072.23474.13.camel@rosella.wigram>
References: <1181720072.23474.13.camel@rosella.wigram>
Content-Type: text/plain
Date: Wed, 13 Jun 2007 22:39:00 +1000
Message-Id: <1181738340.6135.6.camel@rosella.wigram>
Mime-Version: 1.0
X-Mailer: Evolution 2.10.1 
Content-Transfer-Encoding: 7bit
X-Miltered: at concorde with ID 466FE56A.000 by Joe's j-chkmail (http://j-chkmail . ensmp . fr)!
X-Spam: no; 0.00; stack:01 ocaml:01 cygwin:01 cygwin:01 ocaml:01 stack:01 parser:01 recursive:01 ocamlopt:01 parser:01 ocamlopt:01 cmx:01 compiler:01 cmx:01 ocamlc:01 

On Wed, 2007-06-13 at 17:34 +1000, skaller wrote:
> Hi, we've got a problem with an Ocaml native code program running under
> Cygwin exiting without producing output or diagnostics. I think
> Cygwin is running Ocaml 3.08. It was suggested
> this was probably a stack overflow. The program is Dypgen GLR
> parser generator, which is probably heavily recursive. It works
> fine on my AMD64/Ubuntu Linux box, Ocaml 3.10-dev+25 or something.
> 
> Does anyone know how to increase the stack size, or have any other
> idea how to work around this problem? Or any idea if it could
> be any other problem?

Woops! I misdiagnosed the problem I think. I put -ccopts and
dypgen runs fine .. however Ocamlopt.opt does not compile it
the generated file ;(

The file src/flx_parser.ml is generated by Dypgen, but ocamlopt.opt
doesn't compile it, nor issue any diagnostic (not even returning
with an error code). It just completes without generating a
src/flx_parse.cmx file.

Unfortunately, recompiling Ocaml on Cygwin isn't an option.
Is there someone here maintaining the Cygwin port? 
Any chance of 3.09 series Ocaml, and, with the native
code compiler built with a larger stack?

I've yet to try running with larger memory for Cygwin as
suggested by Igor -- the ml file is quite large:

 20555  92221 804093 src/flx_parse.ml

src/flx_parse.cmx on amd64/Ubuntu is 83569 bytes.

I also suppose I can try ocamlopt (sans .opt) or even
ocamlc (ouch!).


-- 
John Skaller <skaller at users dot sf dot net>
Felix, successor to C++: http://felix.sf.net

