Received: (from weis@localhost) by pauillac.inria.fr (8.7.6/8.7.3) id BAA11753 for caml-redistribution; Fri, 26 Jun 1998 01:27:12 +0200 (MET DST)
Received: from concorde.inria.fr (concorde.inria.fr [192.93.2.39]) by pauillac.inria.fr (8.7.6/8.7.3) with ESMTP id LAA16239 for <caml-list@pauillac.inria.fr>; Thu, 25 Jun 1998 11:43:12 +0200 (MET DST)
Received: from pauillac.inria.fr (pauillac.inria.fr [128.93.11.35])
	by concorde.inria.fr (8.8.7/8.8.7) with ESMTP id LAA09982;
	Thu, 25 Jun 1998 11:43:10 +0200 (MET DST)
Received: (from xleroy@localhost) by pauillac.inria.fr (8.7.6/8.7.3) id LAA03055; Thu, 25 Jun 1998 11:43:10 +0200 (MET DST)
Message-ID: <19980625114309.54105@pauillac.inria.fr>
Date: Thu, 25 Jun 1998 11:43:09 +0200
From: Xavier Leroy <Xavier.Leroy@inria.fr>
To: Markus Mottl <mottl@miss.wu-wien.ac.at>, OCAML <caml-list@inria.fr>
Subject: Re: ocamldebug must not be stripped!
References: <199806220948.LAA28374@miss.wu-wien.ac.at>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.89.1
In-Reply-To: <199806220948.LAA28374@miss.wu-wien.ac.at>; from Markus Mottl on Mon, Jun 22, 1998 at 11:48:44AM +0100
Sender: weis

> I have just found out that "ocamldebug" itself must not be stripped in
> order to work (at least under i686 - Linux 2.0.30 and Alpha - Digital
> Unix 4.0d). I didn't find this anywhere in the documentation.
> Does "ocamldebug" really need its own debug information or is this a bug?
> It will probably need it in any case... ;-)
> 
> Do the other programs need their debug information? Until now I have
> not encountered any problems, but who knows...

All executables generated by "ocamlc -custom" must not be stripped.

The reason is that they are composed of a C executable (the custom
runtime system) concatenated with the OCaml bytecode for the program.
The C executable looks at "itself" (the file it comes from) to load
the bytecode.

"strip" on most Unix machines just discards the C debugging
information as well as everything that follows it, thus discarding the
bytecode as well.

ocamldebug is just an instance of the general case, since it is
produced by "ocamlc -custom".

- Xavier Leroy




