Return-Path: <alain.frisch@lexifi.com>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail3-relais-sop.national.inria.fr (mail3-relais-sop.national.inria.fr [192.134.164.104])
	by sympa.inria.fr (Postfix) with ESMTPS id E16137EEF8
	for <caml-list@sympa.inria.fr>; Fri, 17 Jul 2015 19:12:06 +0200 (CEST)
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  alain.frisch@lexifi.com) identity=pra;
  client-ip=85.233.204.130;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="alain.frisch@lexifi.com";
  x-sender="alain.frisch@lexifi.com";
  x-conformance=sidf_compatible
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  alain.frisch@lexifi.com) identity=mailfrom;
  client-ip=85.233.204.130;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="alain.frisch@lexifi.com";
  x-sender="alain.frisch@lexifi.com";
  x-conformance=sidf_compatible
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@mx10.yaziba.net) identity=helo;
  client-ip=85.233.204.130;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="alain.frisch@lexifi.com";
  x-sender="postmaster@mx10.yaziba.net";
  x-conformance=sidf_compatible
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: A0DUAAA/NqlVnILM6VVaxVOCVAKBSUwBAQEBAQESAQEBAQEIFAlPhCQBAQQ4QBELDgoJFg8JAwIBAgFFBgEMCAEBiC7QTAEBCAIBH4tMhQ2EKwEElEyMH4hKkDcCgQmDG4M4AQEB
X-IPAS-Result: A0DUAAA/NqlVnILM6VVaxVOCVAKBSUwBAQEBAQESAQEBAQEIFAlPhCQBAQQ4QBELDgoJFg8JAwIBAgFFBgEMCAEBiC7QTAEBCAIBH4tMhQ2EKwEElEyMH4hKkDcCgQmDG4M4AQEB
X-IronPort-AV: E=Sophos;i="5.15,497,1432591200"; 
   d="scan'208";a="140393286"
Received: from mx10.yaziba.net ([85.233.204.130])
  by mail3-smtp-sop.national.inria.fr with ESMTP/TLS/ADH-AES256-SHA; 17 Jul 2015 19:12:06 +0200
Received: from mta10.int.yaziba.net (unknown [10.4.20.30])
	by mx10.yaziba.net (mx10.yaziba.net) with ESMTP id D4CF3322712;
	Fri, 17 Jul 2015 19:12:05 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by mta10.int.yaziba.net (Postfix) with ESMTP id CB75513CABA;
	Fri, 17 Jul 2015 19:12:05 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mta10.int.yaziba.net
Received: from mta10.int.yaziba.net ([127.0.0.1])
	by localhost (mta10.int.yaziba.net [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id KlFTaGfORfh6; Fri, 17 Jul 2015 19:12:05 +0200 (CEST)
Received: from localhost (localhost [127.0.0.1])
	by mta10.int.yaziba.net (Postfix) with ESMTP id AA23413CABC;
	Fri, 17 Jul 2015 19:12:05 +0200 (CEST)
X-Virus-Scanned: amavisd-new at mta10.int.yaziba.net
Received: from mta10.int.yaziba.net ([127.0.0.1])
	by localhost (mta10.int.yaziba.net [127.0.0.1]) (amavisd-new, port 10026)
	with ESMTP id gRBZnggbxIzU; Fri, 17 Jul 2015 19:12:05 +0200 (CEST)
Received: from [10.0.48.88] (unknown [185.23.92.144])
	by mta10.int.yaziba.net (Postfix) with ESMTPSA id 902E713CABA;
	Fri, 17 Jul 2015 19:12:05 +0200 (CEST)
Message-ID: <55A93766.9000503@lexifi.com>
Date: Fri, 17 Jul 2015 19:12:06 +0200
From: Alain Frisch <alain.frisch@lexifi.com>
Organization: LexiFi
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:31.0) Gecko/20100101 Thunderbird/31.7.0
MIME-Version: 1.0
To: David Allsopp <dra-news@metastack.com>, 
 OCaml List <caml-list@inria.fr>
References: <003401d0be52$320d6a00$96283e00$@metastack.com> <55A646CA.8050605@lexifi.com> <E51C5B015DBD1348A1D85763337FB6D9E9D1D91F@Remus.metastack.local>
In-Reply-To: <E51C5B015DBD1348A1D85763337FB6D9E9D1D91F@Remus.metastack.local>
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 7bit
X-DRWEB-SCAN: ok
X-VRSPAM-SCORE: -100
X-VRSPAM-STATE: legit
X-VRSPAM-CAUSE: gggruggvucftvghtrhhoucdtuddrfeekvddrieefgdduuddvucetufdoteggodetrfcurfhrohhfihhlvgemucggtfgfnhhsuhgsshgtrhhisggvpdgjtegkkfeuteenuceurghilhhouhhtmecufedttdenucesvcftvggtihhpihgvnhhtshculddquddttddmnecujfgurhepkfffhfhofgggvffufhgjtgfgsehtjegrtddtfeehnecuhfhrohhmpeetlhgrihhnucfhrhhishgthhcuoegrlhgrihhnrdhfrhhishgthheslhgvgihifhhirdgtohhmqe
X-VRSPAM-EXTCAUSE: mhhouggvpehsmhhtphhouhht
Subject: Re: [Caml-list] Building MSVC ports: coreutils link conflict

On 07/17/2015 05:42 PM, David Allsopp wrote:
> would a patch to the compiler (and to flexlink)

The compiler doesn't often call "link.exe" directly.  As far as I can 
tell, it does it only in case of partial linking to support module 
packing in native code.  And ocamlmklib can create static libraries by 
calling the linker directly.   I'm wondering whether it would be a good 
occasion to tell flexlink how to do these two operations (for all 
supported toolchains), so that ocaml itself doesn't ever talk to the 
linker directly anymore, but only through flexlink.  This would mean 
that the logic to find the correct link.exe would only be in flexlink.

Do you think it would be a good idea?

Alain
