Return-Path: <mail@matej-kosik.net>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail3-relais-sop.national.inria.fr (mail3-relais-sop.national.inria.fr [192.134.164.104])
	by sympa.inria.fr (Postfix) with ESMTPS id 433DB80211
	for <caml-list@sympa.inria.fr>; Thu, 19 Oct 2017 12:55:31 +0200 (CEST)
Authentication-Results: mail3-smtp-sop.national.inria.fr; spf=None smtp.pra=mail@matej-kosik.net; spf=SoftFail smtp.mailfrom=mail@matej-kosik.net; spf=SoftFail smtp.helo=postmaster@matej-kosik.net
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  mail@matej-kosik.net) identity=pra; client-ip=145.239.83.105;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="mail@matej-kosik.net";
  x-sender="mail@matej-kosik.net";
  x-conformance=sidf_compatible
Received-SPF: SoftFail (mail3-smtp-sop.national.inria.fr: domain
  of mail@matej-kosik.net is inclined to not designate
  145.239.83.105 as permitted sender) identity=mailfrom;
  client-ip=145.239.83.105;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="mail@matej-kosik.net";
  x-sender="mail@matej-kosik.net";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
Received-SPF: SoftFail (mail3-smtp-sop.national.inria.fr: domain
  of postmaster@matej-kosik.net is inclined to not designate
  145.239.83.105 as permitted sender) identity=helo;
  client-ip=145.239.83.105;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="mail@matej-kosik.net";
  x-sender="postmaster@matej-kosik.net";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
IronPort-PHdr: =?us-ascii?q?9a23=3APUBvyBwA4FSSFFjXCy+O+j09IxM/srCxBDY+r6Qd?=
 =?us-ascii?q?0u0eIJqq85mqBkHD//Il1AaPBtqLra8cw8Pt8IneGkU4qa6bt34DdJEeHzQksu?=
 =?us-ascii?q?4x2zIaPcieFEfgJ+TrZSFpVO5LVVti4m3peRMNQJW2SkPfuEKy7CIfX1DWfUow?=
 =?us-ascii?q?f7ytW92as8Pi3Om3/9jXYh5UrDu7e7J7ahus/ivLscxDpIJ+J6R56Rw7J3gAL+?=
 =?us-ascii?q?FfxGdAIFuPkhS55cCr/Z0l9SlM7aFyv/VcWLn3KvxrBYdTCy4rZiVsvJXm?=
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: =?us-ascii?q?A0DZCQBpg+hZZGlT75FdHgYMGQYMgzRna?=
 =?us-ascii?q?4QhixOmcoIUB4U5A4ULQRcBAQEBAQEBAQEBAQOBD4I4JAGCaoEzAgRPGQgBAYo?=
 =?us-ascii?q?gqwKCJ4tDD4MvgluDEohUgkiCYQWhU4Q/giGZdYczly0hAjNDgRmBBQqDLoILD?=
 =?us-ascii?q?AGCSItaAQEB?=
X-IPAS-Result: =?us-ascii?q?A0DZCQBpg+hZZGlT75FdHgYMGQYMgzRna4QhixOmcoIUB4U?=
 =?us-ascii?q?5A4ULQRcBAQEBAQEBAQEBAQOBD4I4JAGCaoEzAgRPGQgBAYogqwKCJ4tDD4Mvg?=
 =?us-ascii?q?luDEohUgkiCYQWhU4Q/giGZdYczly0hAjNDgRmBBQqDLoILDAGCSItaAQEB?=
X-IronPort-AV: E=Sophos;i="5.43,401,1503352800"; 
   d="asc'?txt'?scan'208";a="241623494"
Received: from 105.ip-145-239-83.eu (HELO matej-kosik.net) ([145.239.83.105])
  by mail3-smtp-sop.national.inria.fr with ESMTP; 19 Oct 2017 12:55:30 +0200
Received: from [192.168.1.10] (adsl-dyn234.78-99-243.t-com.sk [78.99.243.234])
	by matej-kosik.net (Postfix) with ESMTPSA id A51BB1F59F
	for <caml-list@inria.fr>; Thu, 19 Oct 2017 12:55:27 +0200 (CEST)
To: caml-list@inria.fr
From: =?UTF-8?B?TWF0ZWogS2/FocOtaw==?= <mail@matej-kosik.net>
Openpgp: id=1CD41D0A52319DC7ABC1B79F50AFFA128CE48649;
 url=http://matej-kosik.net/doc/kosik.asc
Message-ID: <59fb8cd9-0b10-b3a8-7ebf-d7a0b5d1583a@matej-kosik.net>
Date: Thu, 19 Oct 2017 12:55:26 +0200
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101
 Thunderbird/52.3.0
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha256;
 protocol="application/pgp-signature";
 boundary="5AFvBPg1srhaJPtpQ46vwh713ocsp424t"
Subject: [Caml-list] how to get location of a polymorphic variant via
 compiler libs

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--5AFvBPg1srhaJPtpQ46vwh713ocsp424t
Content-Type: multipart/mixed; boundary="0GKu10V2gsQasS1P9aaHhtdautiNUFlwM";
 protected-headers="v1"
From: =?UTF-8?B?TWF0ZWogS2/FocOtaw==?= <mail@matej-kosik.net>
To: caml-list@inria.fr
Message-ID: <59fb8cd9-0b10-b3a8-7ebf-d7a0b5d1583a@matej-kosik.net>
Subject: how to get location of a polymorphic variant via compiler libs

--0GKu10V2gsQasS1P9aaHhtdautiNUFlwM
Content-Type: multipart/mixed;
 boundary="------------6D09AE15E3A0C6237F2A24A2"
Content-Language: en-US

This is a multi-part message in MIME format.
--------------6D09AE15E3A0C6237F2A24A2
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

Hi,

I am using compiler-libs for getting locations of lexical items I am intere=
sted in.
(modules, values, types, non-polymorphic variants, record labels).

If I have a code like this:

  type t =3D [`Foo | `Bar]

does the parse-tree hold the location of "`Foo" (or "`Bar") somewhere?

(I am not interested in the location of the whole type definition --- just =
the location of a specific polymorphic variant/constructor.)

The attachment display the available parse-tree I can see
(and not able to find bits I am interested in)

--------------6D09AE15E3A0C6237F2A24A2
Content-Type: text/plain; charset=UTF-8;
 name="parsetree.txt"
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename="parsetree.txt"

dmFsIHN0cnVjdHVyZSA6IFBhcnNldHJlZS5zdHJ1Y3R1cmUgPQogIFt7cHN0
cl9kZXNjID0KICAgICBQc3RyX3R5cGUgKEFzdHR5cGVzLlJlY3Vyc2l2ZSwK
ICAgICAgW3twdHlwZV9uYW1lID0KICAgICAgICAge0FzdHR5cGVzLnR4dCA9
ICJ0IjsKICAgICAgICAgIGxvYyA9CiAgICAgICAgICAge2xvY19zdGFydCA9
CiAgICAgICAgICAgICB7TGV4aW5nLnBvc19mbmFtZSA9ICIiOyBwb3NfbG51
bSA9IDE7IHBvc19ib2wgPSAwOyBwb3NfY251bSA9IDV9OwogICAgICAgICAg
ICBsb2NfZW5kID0KICAgICAgICAgICAgIHtMZXhpbmcucG9zX2ZuYW1lID0g
IiI7IHBvc19sbnVtID0gMTsgcG9zX2JvbCA9IDA7IHBvc19jbnVtID0gNn07
CiAgICAgICAgICAgIGxvY19naG9zdCA9IGZhbHNlfX07CiAgICAgICAgcHR5
cGVfcGFyYW1zID0gW107IHB0eXBlX2NzdHJzID0gW107IHB0eXBlX2tpbmQg
PSBQdHlwZV9hYnN0cmFjdDsKICAgICAgICBwdHlwZV9wcml2YXRlID0gQXN0
dHlwZXMuUHVibGljOwogICAgICAgIHB0eXBlX21hbmlmZXN0ID0KICAgICAg
ICAgU29tZQogICAgICAgICAge3B0eXBfZGVzYyA9CiAgICAgICAgICAgIFB0
eXBfdmFyaWFudAogICAgICAgICAgICAgKFtSdGFnICgiRm9vIiwgW10sIHRy
dWUsIFtdKTsgUnRhZyAoIkJhciIsIFtdLCB0cnVlLCBbXSldLAogICAgICAg
ICAgICAgQXN0dHlwZXMuQ2xvc2VkLCBOb25lKTsKICAgICAgICAgICBwdHlw
X2xvYyA9CiAgICAgICAgICAgIHtsb2Nfc3RhcnQgPQogICAgICAgICAgICAg
IHtMZXhpbmcucG9zX2ZuYW1lID0gIiI7IHBvc19sbnVtID0gMTsgcG9zX2Jv
bCA9IDA7CiAgICAgICAgICAgICAgIHBvc19jbnVtID0gOX07CiAgICAgICAg
ICAgICBsb2NfZW5kID0KICAgICAgICAgICAgICB7TGV4aW5nLnBvc19mbmFt
ZSA9ICIiOyBwb3NfbG51bSA9IDE7IHBvc19ib2wgPSAwOwogICAgICAgICAg
ICAgICBwb3NfY251bSA9IDIyfTsKICAgICAgICAgICAgIGxvY19naG9zdCA9
IGZhbHNlfTsKICAgICAgICAgICBwdHlwX2F0dHJpYnV0ZXMgPSBbXX07CiAg
ICAgICAgcHR5cGVfYXR0cmlidXRlcyA9IFtdOwogICAgICAgIHB0eXBlX2xv
YyA9CiAgICAgICAgIHtsb2Nfc3RhcnQgPQogICAgICAgICAgIHtMZXhpbmcu
cG9zX2ZuYW1lID0gIiI7IHBvc19sbnVtID0gMTsgcG9zX2JvbCA9IDA7IHBv
c19jbnVtID0gMH07CiAgICAgICAgICBsb2NfZW5kID0KICAgICAgICAgICB7
TGV4aW5nLnBvc19mbmFtZSA9ICIiOyBwb3NfbG51bSA9IDE7IHBvc19ib2wg
PSAwOyBwb3NfY251bSA9IDIyfTsKICAgICAgICAgIGxvY19naG9zdCA9IGZh
bHNlfX1dKTsKICAgIHBzdHJfbG9jID0KICAgICB7bG9jX3N0YXJ0ID0KICAg
ICAgIHtMZXhpbmcucG9zX2ZuYW1lID0gIiI7IHBvc19sbnVtID0gMTsgcG9z
X2JvbCA9IDA7IHBvc19jbnVtID0gMH07CiAgICAgIGxvY19lbmQgPQogICAg
ICAge0xleGluZy5wb3NfZm5hbWUgPSAiIjsgcG9zX2xudW0gPSAxOyBwb3Nf
Ym9sID0gMDsgcG9zX2NudW0gPSAyMn07CiAgICAgIGxvY19naG9zdCA9IGZh
bHNlfX1dCg==

--------------6D09AE15E3A0C6237F2A24A2--

--0GKu10V2gsQasS1P9aaHhtdautiNUFlwM--

--5AFvBPg1srhaJPtpQ46vwh713ocsp424t
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEEHNQdClIxncerwbefUK/6EozkhkkFAlnohJ4ACgkQUK/6Eozk
hklkZhAAkXVry0Kr8Y5wBSGnOvLVDWH3UaW1gcfmyMcTGRNOrGy5CtnAtRqvpbS4
QtGQEUK2gUp09N9ghhhZgLNQkpbnCOqQt90d05gNkZ3pfGrbPhv9ONDZiBPJjpGQ
Xdy8cs52Lj0q3p2Rc6vtKya2jaWJqShTlJNsgGuX0iGFkGy4VHpDvfCGM3GVTuSm
n3ZTQkf82fcDZdiXr4frgNeKWBcYxzx7uIsclA3eYEp3lVjkA+HlSHBTQ8zl82YM
N2HsGf12DdNeYtXA9BujGTsPggkb8R5cqG3gfUASyRgxgxVAYbudOL55/OXKqw4y
xofbP8HKfn9Gi9OmhMce08pl2M8PQzUNviUlgA1tezJeZGme+6g0/9lO4cpSUsOt
PDGEZmM8kAdUrCNkujgIoXqUh72JgDERkz77JchcpzENywikQbkfiqK+uRxVmU8g
iw4WBCKIadDAvudReyH8ulw9BNo5c+b99zISHYtqlshf1TF6Mt+te/vrVw5kesmY
Xb5FGkcX1Iu6PvKv5oTTmj0Xu03b2wYeEh8DVZPPXkJA+XF5lPKKl8aeHHB1M4Mu
aLtK407mivIrxE0yU/6OKIPZvnB4JqSWfRWhdE//DEDuwjb4g897HkrisdXrpPl1
68OVHQkdKJejeU4DnQr167+n6oAYpegmEVgsVXnhQa1IezsNWig=
=RLzd
-----END PGP SIGNATURE-----

--5AFvBPg1srhaJPtpQ46vwh713ocsp424t--
