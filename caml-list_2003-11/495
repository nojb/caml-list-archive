Received: (from majordomo@localhost) by pauillac.inria.fr (8.7.6/8.7.3) id LAA15763; Tue, 25 Nov 2003 11:42:12 +0100 (MET)
X-Authentication-Warning: pauillac.inria.fr: majordomo set sender to owner-caml-list@pauillac.inria.fr using -f
Received: from concorde.inria.fr (concorde.inria.fr [192.93.2.39]) by pauillac.inria.fr (8.7.6/8.7.3) with ESMTP id LAA14255 for <caml-list@pauillac.inria.fr>; Tue, 25 Nov 2003 11:42:10 +0100 (MET)
Received: from pareto.inria.fr.inria.fr (lamarck.inria.fr [128.93.1.21])
	by concorde.inria.fr (8.11.1/8.11.1) with ESMTP id hAPAg0110468;
	Tue, 25 Nov 2003 11:42:00 +0100 (MET)
Date: Tue, 25 Nov 2003 11:42:00 +0100
Message-ID: <lwn0akk9vr.wl@inria.fr>
From: Jun.Furuse@inria.fr
To: "chris.danx" <chris.danx@ntlworld.com>
Cc: Jun.Furuse@inria.fr, Caml Mailing List <caml-list@inria.fr>
Subject: Re: [Caml-list] Building camlimages programs on deb (and linux)
In-Reply-To: <3FC28E02.70205@ntlworld.com>
References: <D4DBD8568F05D511A1C20002A55C008C11AC0796@uswaumsx03medge.med.ge.com>
	<3FC2528E.60506@ntlworld.com>
	<lwd6bhjy0h.wl@inria.fr>
	<3FC28E02.70205@ntlworld.com>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 14) (Reasonable Discussion) (i386-debian-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
X-Loop: caml-list@inria.fr
X-Spam: no; 0.00; furuse:01 caml-list:01 camlimages:01 ocamlc:01 -verbose:01 usr:01 xvthumb:01 ocamlc:01 -verbose:01 usr:01 gcc:01 -wl:01 3.07:01 -wl:01 -rpath:01 
Sender: owner-caml-list@pauillac.inria.fr
Precedence: bulk

> > BTW, it sounds still strange that you fail to link even with -lX11.
> > Please send me what happens (including error messages) if you execute
> > the following:
> > 
> > 	ocamlc -custom -verbose `camlimages-config` 
> > 	-cclib "-L/usr/X11R6/lib -lxvthumb -lXpm 
> > 	-lX11 -lpng -lfreetype -lz -ljpeg -lgif"
> 
> It fails on xvthumb, but if I take that out it links ok. :?

Oops, sorry. You are correct. There is no libxvthumb.
 
> ocamlc -custom -verbose `camlimages-config` -cclib "-L/usr/X11R6/lib 
> -lXpm -lX11 -lpng -lfreetype -ljpeg -lgif" monochrome.ml
> + gcc -Wl,-E -o 'a.out' -I'/usr/lib/ocaml/3.07' -L/usr/X11R6/lib 
> -Wl,-rpath,/usr/X11R6/lib /tmp/camlprim88d632.c 
> '-L/usr/lib/ocaml/3.07/camlimages' '-L/usr/lib/ocaml/3.07' '-lci_xpm' 
> '-lXpm' '-lci_png' '-lpng' '-lz' '-lci_tiff' '-ltiff' '-lci_jpeg' 
> '-ljpeg' '-lci_gif' '-lgif' '-L/usr/X11R6/lib' '-lXpm' '-lX11' '-lpng' 
> '-lfreetype' '-ljpeg' '-lgif' -lcamlrun -lm  -ldl -lcurses -lpthread

Everyhing seems to be ok.
 
> Also if -custom is removed it fails.

Yes, it also happens in my system, too. This is due to a bug that 
the dynlink options of ci_xpm.cma lack -lX11. I did not notice
this bug since I always linked ci_xpm.cma with ci_graphics.cma
together, which links -lX11. I will fix this soon.

--
Jun

-------------------
To unsubscribe, mail caml-list-request@inria.fr Archives: http://caml.inria.fr
Bug reports: http://caml.inria.fr/bin/caml-bugs FAQ: http://caml.inria.fr/FAQ/
Beginner's list: http://groups.yahoo.com/group/ocaml_beginners

