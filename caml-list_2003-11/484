Received: (from majordomo@localhost) by pauillac.inria.fr (8.7.6/8.7.3) id VAA15389; Mon, 24 Nov 2003 21:46:21 +0100 (MET)
X-Authentication-Warning: pauillac.inria.fr: majordomo set sender to owner-caml-list@pauillac.inria.fr using -f
Received: from concorde.inria.fr (concorde.inria.fr [192.93.2.39]) by pauillac.inria.fr (8.7.6/8.7.3) with ESMTP id VAA16068 for <caml-list@pauillac.inria.fr>; Mon, 24 Nov 2003 21:46:20 +0100 (MET)
Received: from pareto.inria.fr.inria.fr (lamarck.inria.fr [128.93.1.21])
	by concorde.inria.fr (8.11.1/8.11.1) with ESMTP id hAOKk6123535;
	Mon, 24 Nov 2003 21:46:06 +0100 (MET)
Date: Mon, 24 Nov 2003 21:46:06 +0100
Message-ID: <lwd6bhjy0h.wl@inria.fr>
From: Jun.Furuse@inria.fr
To: "chris.danx" <chris.danx@ntlworld.com>
Cc: "Gurr, David (MED, self)" <David.Gurr@med.ge.com>,
        Caml Mailing List <caml-list@inria.fr>
Subject: Re: [Caml-list] Building camlimages programs on deb (and linux)
In-Reply-To: <3FC2528E.60506@ntlworld.com>
References: <D4DBD8568F05D511A1C20002A55C008C11AC0796@uswaumsx03medge.med.ge.com>
	<3FC2528E.60506@ntlworld.com>
User-Agent: Wanderlust/2.10.1 (Watching The Wheels) SEMI/1.14.5 (Awara-Onsen) FLIM/1.14.5 (Demachiyanagi) APEL/10.6 MULE XEmacs/21.4 (patch 14) (Reasonable Discussion) (i386-debian-linux)
MIME-Version: 1.0 (generated by SEMI 1.14.5 - "Awara-Onsen")
Content-Type: text/plain; charset=US-ASCII
X-Loop: caml-list@inria.fr
X-Spam: no; 0.00; furuse:01 caml-list:01 camlimages:01 ocamlc:01 usr:01 camlimages:01 usr:01 ocamlc:01 -verbose:01 bug:01 ocaml:01 -custom:01 -lx:01 -lx:01 images:98 
Sender: owner-caml-list@pauillac.inria.fr
Precedence: bulk

Hello,
 
> ocamlc `camlimages-config` -cclib "-L/usr/X11R6/lib -lxvthumb -lXpm 
> -lX11 -lpng -lfreetype -lz -ljpeg -lgif"

Duh, I cannot tell what is wrong. Even we, the authors, do not know
about the script "camlimages-config". It is not from  the official
camlimages distribution. (I guess it comes from Debian package, which
is out of my control.) 

I always use $(CAMLIMAGESLIBS) defined inside
/usr/local/lib/ocaml/camlimages/Makefile.config for linking the
camlimages to my programs. It should list all the libraries required.

BTW, it sounds still strange that you fail to link even with -lX11.
Please send me what happens (including error messages) if you execute
the following:

	ocamlc -custom -verbose `camlimages-config` 
	-cclib "-L/usr/X11R6/lib -lxvthumb -lXpm 
	-lX11 -lpng -lfreetype -lz -ljpeg -lgif"

> If i leave ci_xpm.cma off, it links.  I don't know if it's safe to leave 
> it off.  I suppose if I don't use XPM it'll be ok, but it's not the 
> greatest solution.

Camlimages libraries are separated into pieces so that you can link
the libraries you really want. If you are not interested to read/write
xpm images in your program, you need not to link ci_xpm.cma.

Anyway, you found a bug of camlimages. Usually Xpm requires X11, but I
forgot to link it. I will fix the problem.

--
Jun

-------------------
To unsubscribe, mail caml-list-request@inria.fr Archives: http://caml.inria.fr
Bug reports: http://caml.inria.fr/bin/caml-bugs FAQ: http://caml.inria.fr/FAQ/
Beginner's list: http://groups.yahoo.com/group/ocaml_beginners

