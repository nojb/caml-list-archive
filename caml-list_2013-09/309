Return-Path: <info@gerd-stolpmann.de>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail3-relais-sop.national.inria.fr (mail3-relais-sop.national.inria.fr [192.134.164.104])
	by sympa.inria.fr (Postfix) with ESMTPS id 14F567EE49
	for <caml-list@sympa.inria.fr>; Fri, 20 Sep 2013 17:54:54 +0200 (CEST)
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  info@gerd-stolpmann.de) identity=pra;
  client-ip=212.227.126.186;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="info@gerd-stolpmann.de";
  x-conformance=sidf_compatible
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  info@gerd-stolpmann.de) identity=mailfrom;
  client-ip=212.227.126.186;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="info@gerd-stolpmann.de";
  x-conformance=sidf_compatible
Received-SPF: Pass (mail3-smtp-sop.national.inria.fr: domain of
  postmaster@moutng.kundenserver.de designates 212.227.126.186
  as permitted sender) identity=helo;
  client-ip=212.227.126.186;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="info@gerd-stolpmann.de";
  x-sender="postmaster@moutng.kundenserver.de";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AuQBAEluPFLU4366lGdsb2JhbABbgz+De74QgRoWDgEBAQEHCwsJEiqCJQEBBAEjVgULCw4fFQICVwYTCYd2CgioH5I7iUKFfSYHCoJfgTUDjnqKMYUCjms
X-IPAS-Result: AuQBAEluPFLU4366lGdsb2JhbABbgz+De74QgRoWDgEBAQEHCwsJEiqCJQEBBAEjVgULCw4fFQICVwYTCYd2CgioH5I7iUKFfSYHCoJfgTUDjnqKMYUCjms
X-IronPort-AV: E=Sophos;i="4.90,945,1371074400"; 
   d="asc'?scan'208";a="27562530"
Received: from moutng.kundenserver.de ([212.227.126.186])
  by mail3-smtp-sop.national.inria.fr with ESMTP/TLS/RC4-SHA; 20 Sep 2013 17:54:53 +0200
Received: from office1.lan.sumadev.de (dslb-178-004-026-199.pools.arcor-ip.net [178.4.26.199])
	by mrelayeu.kundenserver.de (node=mrbap4) with ESMTP (Nemesis)
	id 0LnBin-1Voxft1Lkj-00hJWx; Fri, 20 Sep 2013 17:54:52 +0200
Received: from [192.168.5.106] (dslb-178-004-026-199.pools.arcor-ip.net [178.4.26.199])
	by office1.lan.sumadev.de (Postfix) with ESMTPSA id 0B292C00CF;
	Fri, 20 Sep 2013 17:54:52 +0200 (CEST)
Message-ID: <1379692480.11824.28.camel@thinkpad>
From: Gerd Stolpmann <info@gerd-stolpmann.de>
To: Dwight Schauer <dschauer@gmail.com>
Cc: caml-list@inria.fr
Date: Fri, 20 Sep 2013 17:54:40 +0200
In-Reply-To: <CAKdt_-YTk2gfc6P2-jyLVzTbp7heueC+M3t=p_LJWaNMC_zR7Q@mail.gmail.com>
References: 
	<CAKdt_-YTk2gfc6P2-jyLVzTbp7heueC+M3t=p_LJWaNMC_zR7Q@mail.gmail.com>
Content-Type: multipart/signed; micalg="pgp-sha1"; protocol="application/pgp-signature";
	boundary="=-PZemtCcV08pRzP6cHgJ/"
X-Mailer: Evolution 3.2.3-0ubuntu6 
Mime-Version: 1.0
X-Provags-ID: V02:K0:Sr2KBUIN3dgXICYEV9NDOBeVnvFFXtwUI/yEeMOXDZe
 DHhdRQiR/YBaLx0kk9jqGBhF3FIcSWcmW6Jr6GtRdLZYG1TV/i
 r3bCUO9SOEVUGfxEQKL7MIndvS10MSZFHhwQm1klZdujij22Ql
 SduEdMn7HMgOwOdio3LEAKgFOzjPrxEL1X3UL3Gir8u6RYi4BX
 41Z7klwYzwYlnYIrBBK25zoQGocI12seJaxiMeCrAiZlvMwuHD
 TaPzrPjzmsFflu0kDCSN4ihaNeB0Pm/rz/oAORw2g+hH9OweLo
 Zzz8nllTFT3icV2NB08NHROs+Y2JIl29tJbGAJ9FM249G80qzo
 Z4HtYlEOb2xTXav3I2XeFM8ZT7hE/msxmOousDTo9
Subject: Re: [Caml-list] Ocaml on an embedded arm system (no linux)


--=-PZemtCcV08pRzP6cHgJ/
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: quoted-printable

Am Freitag, den 20.09.2013, 09:13 -0500 schrieb Dwight Schauer:

> The ARM processors I'm looking to target are:
> STM32F407ZGT6 ARM Cortex-M4, 1MB Flash, 196KB RAM (Has floating point)
> STM32F103RB ARM Cortex-M3, 128 KB Flash, 20K RAM (No floating point)

I hope this isn't a typo. 196 KB RAM is way too low to even run a hello
world program. The predecessor of ocaml, caml-light, needed 640K at
minimum for running it on DOS, and that was 16 bit code. Ocaml is a lot
larger, and generates less dense 32 bit code.

For a very small app on bare metal, I think you need at least 4-8 MB of
memory. For making you happy, calculate 64 MB. I cannot say much about
the split flash mem vs. RAM - but you should take into account that the
representation of values isn't optimized for compactness, and you also
need extra RAM to give the garbage collector room.

Maybe it is possible to lower the memory requirements by modifying the
ocaml runtime (e.g. make the bytecode more compact at the cost of extra
decoding steps, remove unneeded parts like the compactor, ...), but I
doubt you'll be able to hit the mentioned limits.

Gerd


>=20
>=20
> On both I'd like to be able to run bytecode both out of Flash and RAM.
> (Primarily flash, but RAM for debugging).
>=20
>=20
> Speed is on overly important as long as I can control when the garbage
> collection is run (could be done in C in the multitasker?).
>=20
>=20
>=20
> Dwight
>=20
>=20

--=20
------------------------------------------------------------
Gerd Stolpmann, Darmstadt, Germany    gerd@gerd-stolpmann.de
Creator of GODI and camlcity.org.
Contact details:        http://www.camlcity.org/contact.html
Company homepage:       http://www.gerd-stolpmann.de
------------------------------------------------------------

--=-PZemtCcV08pRzP6cHgJ/
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: This is a digitally signed message part
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)

iQEcBAABAgAGBQJSPG/BAAoJEAaM4b9ZLB5TUC8H/j0cON+oS0Zp3gfah4i9A4QL
q0SsStpUbsBKwqGWHpbtMRl180WD2gxypCPvz07KtBdj4sBdbot2469aaFxYIkod
gBGLpgdqU8PMH2nBbfsQVZPQi1ZAY4ENnv1XlwdlM/PfKHdzNy+3cnY8JtjO907Q
o6z+wndpa0I1xeVaruse/2YsZXPaZZ0dFIBPmN5YAItse3K74iTINvlqfRjCgbRQ
Hs/nuyBAVrjuqZDTvRWXx4n9IJTsyxR+q7LMbbZqcXjVQNNtXLNv3hJkrcrOwjWZ
3ByEwKBg4xNg9VTpBx0FyveyPp/wvdEAYICtdVhnApYNxgnXKXTnqgjazFIzh3U=
=A3bh
-----END PGP SIGNATURE-----

--=-PZemtCcV08pRzP6cHgJ/--

