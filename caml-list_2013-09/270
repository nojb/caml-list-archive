Return-Path: <forum@x9c.fr>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail2-relais-roc.national.inria.fr (mail2-relais-roc.national.inria.fr [192.134.164.83])
	by sympa.inria.fr (Postfix) with ESMTPS id F3CBD7EE49
	for <caml-list@sympa.inria.fr>; Thu, 19 Sep 2013 08:19:08 +0200 (CEST)
Received-SPF: None (mail2-smtp-roc.national.inria.fr: no sender
  authenticity information available from domain of
  forum@x9c.fr) identity=pra; client-ip=87.98.165.38;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="forum@x9c.fr"; x-sender="forum@x9c.fr";
  x-conformance=sidf_compatible
Received-SPF: Pass (mail2-smtp-roc.national.inria.fr: domain of
  forum@x9c.fr designates 87.98.165.38 as permitted sender)
  identity=mailfrom; client-ip=87.98.165.38;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="forum@x9c.fr"; x-sender="forum@x9c.fr";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
Received-SPF: None (mail2-smtp-roc.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@mo2.mail-out.ovh.net) identity=helo;
  client-ip=87.98.165.38;
  receiver=mail2-smtp-roc.national.inria.fr;
  envelope-from="forum@x9c.fr";
  x-sender="postmaster@mo2.mail-out.ovh.net";
  x-conformance=sidf_compatible
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AswBALCWOlJXYqUmnGdsb2JhbABagz/Bf4E3DgEBAQEBBg0JCRQogiUBAQQBeQULCw44VwaIEAoIuhWPNDMHgx6BAAOZKpNr
X-IPAS-Result: AswBALCWOlJXYqUmnGdsb2JhbABagz/Bf4E3DgEBAQEBBg0JCRQogiUBAQQBeQULCw44VwaIEAoIuhWPNDMHgx6BAAOZKpNr
X-IronPort-AV: E=Sophos;i="4.90,934,1371074400"; 
   d="scan'208";a="33458353"
Received: from 6.mo2.mail-out.ovh.net (HELO mo2.mail-out.ovh.net) ([87.98.165.38])
  by mail2-smtp-roc.national.inria.fr with ESMTP; 19 Sep 2013 08:19:07 +0200
Received: from mail626.ha.ovh.net (gw6.ovh.net [213.251.189.206])
	by mo2.mail-out.ovh.net (Postfix) with SMTP id 434D5DC8612
	for <caml-list@inria.fr>; Thu, 19 Sep 2013 08:19:08 +0200 (CEST)
Received: from b0.ovh.net (HELO queueout) (213.186.33.50)
	by b0.ovh.net with SMTP; 19 Sep 2013 08:23:14 +0200
Received: from roam-nat-fw-prg-194-254-61-46.net.univ-paris-diderot.fr (HELO eduroam-prg-sg-1-45-160.net.univ-paris-diderot.fr) (forum%x9c.fr@194.254.61.46)
  by ns0.ovh.net with SMTP; 19 Sep 2013 08:23:14 +0200
X-Ovh-Mailout: 178.32.228.2 (mo2.mail-out.ovh.net)
Mime-Version: 1.0 (Apple Message framework v1283)
Content-Type: text/plain; charset=iso-8859-1
From: "forum@x9c.fr" <forum@x9c.fr>
In-Reply-To: <CAF1Sy-EJXAHq=J8GVT_O7sz2CZMegXwU8VsSiBhFFdb4W6tLXA@mail.gmail.com>
Date: Thu, 19 Sep 2013 08:19:05 +0200
Cc: "forum@x9c.fr" <forum@x9c.fr>,
 Ivan Gotovchits <ivg@ieee.org>,
 jon@ffconsultancy.com,
 Caml List <caml-list@inria.fr>
Content-Transfer-Encoding: quoted-printable
Message-Id: <F3868A24-CA31-46AD-8434-01149C71FAC9@x9c.fr>
References: <036501ceb3e5$bcd7b920$36872b60$@ffconsultancy.com> <CAF1Sy-EqZ7-z9V=LyssUVuSgMA7XQjvROLp9Rcgso0WOWHo2Ww@mail.gmail.com> <87bo3pqy9o.fsf@golf.niidar.ru> <CAF1Sy-EJXAHq=J8GVT_O7sz2CZMegXwU8VsSiBhFFdb4W6tLXA@mail.gmail.com>
To: Kristopher Micinski <krismicinski@gmail.com>
X-Mailer: Apple Mail (2.1283)
X-Ovh-Tracer-Id: 10975835242357523208
X-Ovh-Remote: 194.254.61.46 (roam-nat-fw-prg-194-254-61-46.net.univ-paris-diderot.fr)
X-Ovh-Local: 213.186.33.20 (ns0.ovh.net)
X-OVH-SPAMSTATE: OK
X-OVH-SPAMSCORE: -100
X-OVH-SPAMCAUSE: gggruggvucftvghtrhhoucdtuddrfeeiledrtdduucetufdoteggodetrfcurfhrohhfihhlvgemucfqggfjnecuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd
X-Spam-Check: DONE|U 0.5/N
X-VR-SPAMSTATE: OK
X-VR-SPAMSCORE: -100
X-VR-SPAMCAUSE: gggruggvucftvghtrhhoucdtuddrfeeiledrtdduucetufdoteggodetrfcurfhrohhfihhlvgemucfqggfjnecuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd
Subject: Re: [Caml-list] OCaml on Android


Le 19 sept. 2013 =E0 06:35, Kristopher Micinski a =E9crit :

> With a little bit of hacking it'd probably work, but I'm not sure of the =
status of ocaml-java and haven't looked into the implementation details.  S=
ince ocaml-java outputs class files (afaik) you'd have to sort of hack the =
android build pipeline yourself, but that wouldn't be the hard part: all th=
e tools are there.  The harder part is that the Android SDK is very Java or=
iented, and it just feels awkward as hell to use in OCaml even if you were =
to write a thin wrapper around the SDK.

In theory, you are right that it wouldn't be hard.
In practice, the problem is that OCaml-Java emits classes
for Java 1.7 while (to the best of my knowledge) Android
only accepts Java 1.6 classes. As far as I know, there is no
other pending problem.

=46rom this point, the question would be: is it better to wait
for Android to update to Java 1.7 (or even 1.8...), or to
modify OCaml-Java? Honestly, I would need quite a bit
of encouragement to modify OCaml-Java in this direction...

Regarding interaction with the classes of the Android SDK,
one may be interested in the typer extension allowing to
manipulate Java instances from pure OCaml code:
    http://ocamljava.x9c.fr/preview/javaext.html
The main potential problem with this approach is that the
extension currently allows only to implement interfaces, but
not to extend classes. It may be a problem if for example the
event system of Android is based on abstract classes.
Another problem may be the "linking", i. e. the way Android
expects to execute an application: is it a bare main method,
or is there a need to implement/extend a given interface/class?


Hope this helps,

Xavier Clerc


