Return-Path: <forum@x9c.fr>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail3-relais-sop.national.inria.fr (mail3-relais-sop.national.inria.fr [192.134.164.104])
	by sympa.inria.fr (Postfix) with ESMTPS id 7866C7EE49
	for <caml-list@sympa.inria.fr>; Fri, 20 Sep 2013 08:20:30 +0200 (CEST)
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  forum@x9c.fr) identity=pra; client-ip=188.165.52.147;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="forum@x9c.fr"; x-sender="forum@x9c.fr";
  x-conformance=sidf_compatible
Received-SPF: Pass (mail3-smtp-sop.national.inria.fr: domain of
  forum@x9c.fr designates 188.165.52.147 as permitted sender)
  identity=mailfrom; client-ip=188.165.52.147;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="forum@x9c.fr"; x-sender="forum@x9c.fr";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
Received-SPF: None (mail3-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@mo2.mail-out.ovh.net) identity=helo;
  client-ip=188.165.52.147;
  receiver=mail3-smtp-sop.national.inria.fr;
  envelope-from="forum@x9c.fr";
  x-sender="postmaster@mo2.mail-out.ovh.net";
  x-conformance=sidf_compatible
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: AlcBAGnoO1K8pTSTnGdsb2JhbABbgz/CBoE2DgEBAQEBCAsJCRQogiUBAQV5EAsOCi5XBhOIBwi6ZI80MweDHoEAA5krk2w
X-IPAS-Result: AlcBAGnoO1K8pTSTnGdsb2JhbABbgz/CBoE2DgEBAQEBCAsJCRQogiUBAQV5EAsOCi5XBhOIBwi6ZI80MweDHoEAA5krk2w
X-IronPort-AV: E=Sophos;i="4.90,941,1371074400"; 
   d="scan'208";a="27486576"
Received: from 8.mo2.mail-out.ovh.net (HELO mo2.mail-out.ovh.net) ([188.165.52.147])
  by mail3-smtp-sop.national.inria.fr with ESMTP; 20 Sep 2013 08:20:29 +0200
Received: from mail21.ha.ovh.net (b6.ovh.net [213.186.33.56])
	by mo2.mail-out.ovh.net (Postfix) with SMTP id A9888DC8A6C
	for <caml-list@inria.fr>; Fri, 20 Sep 2013 08:20:29 +0200 (CEST)
Received: from b0.ovh.net (HELO queueout) (213.186.33.50)
	by b0.ovh.net with SMTP; 20 Sep 2013 08:20:29 +0200
Received: from roam-nat-fw-prg-194-254-61-44.net.univ-paris-diderot.fr (HELO eduroam-prg-sg-1-45-160.net.univ-paris-diderot.fr) (forum%x9c.fr@194.254.61.44)
  by ns0.ovh.net with SMTP; 20 Sep 2013 08:20:28 +0200
X-Ovh-Mailout: 178.32.228.2 (mo2.mail-out.ovh.net)
Mime-Version: 1.0 (Apple Message framework v1283)
Content-Type: text/plain; charset=iso-8859-1
From: "forum@x9c.fr" <forum@x9c.fr>
In-Reply-To: <CAF1Sy-FLg+1n_Y_VHcvFEWXQjLMCZ5vWXn-m8FB6rTiqu2yovg@mail.gmail.com>
Date: Fri, 20 Sep 2013 08:20:26 +0200
Cc: "forum@x9c.fr" <forum@x9c.fr>,
 Ivan Gotovchits <ivg@ieee.org>,
 Jon Harrop <jon@ffconsultancy.com>,
 Caml List <caml-list@inria.fr>
Content-Transfer-Encoding: quoted-printable
Message-Id: <5462BDA4-14F2-4EE0-BB74-B56DF3563E1C@x9c.fr>
References: <036501ceb3e5$bcd7b920$36872b60$@ffconsultancy.com> <CAF1Sy-EqZ7-z9V=LyssUVuSgMA7XQjvROLp9Rcgso0WOWHo2Ww@mail.gmail.com> <87bo3pqy9o.fsf@golf.niidar.ru> <CAF1Sy-EJXAHq=J8GVT_O7sz2CZMegXwU8VsSiBhFFdb4W6tLXA@mail.gmail.com> <F3868A24-CA31-46AD-8434-01149C71FAC9@x9c.fr> <CAF1Sy-FLg+1n_Y_VHcvFEWXQjLMCZ5vWXn-m8FB6rTiqu2yovg@mail.gmail.com>
To: Kristopher Micinski <krismicinski@gmail.com>
X-Mailer: Apple Mail (2.1283)
X-Ovh-Tracer-Id: 16801804311811326728
X-Ovh-Remote: 194.254.61.44 (roam-nat-fw-prg-194-254-61-44.net.univ-paris-diderot.fr)
X-Ovh-Local: 213.186.33.20 (ns0.ovh.net)
X-OVH-SPAMSTATE: OK
X-OVH-SPAMSCORE: -100
X-OVH-SPAMCAUSE: gggruggvucftvghtrhhoucdtuddrfeeiledrtddvucetufdoteggodetrfcurfhrohhfihhlvgemucfqggfjnecuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd
X-Spam-Check: DONE|U 0.5/N
X-VR-SPAMSTATE: OK
X-VR-SPAMSCORE: -100
X-VR-SPAMCAUSE: gggruggvucftvghtrhhoucdtuddrfeeiledrtddvucetufdoteggodetrfcurfhrohhfihhlvgemucfqggfjnecuuegrihhlohhuthemuceftddtnecusecvtfgvtghiphhivghnthhsucdlqddutddtmd
Subject: Re: [Caml-list] OCaml on Android


Le 19 sept. 2013 =E0 17:18, Kristopher Micinski a =E9crit :

>=20
>=20
>=20
> On Thu, Sep 19, 2013 at 2:19 AM, forum@x9c.fr <forum@x9c.fr> wrote:
>=20
> Le 19 sept. 2013 =E0 06:35, Kristopher Micinski a =E9crit :
>=20
> > With a little bit of hacking it'd probably work, but I'm not sure of th=
e status of ocaml-java and haven't looked into the implementation details. =
 Since ocaml-java outputs class files (afaik) you'd have to sort of hack th=
e android build pipeline yourself, but that wouldn't be the hard part: all =
the tools are there.  The harder part is that the Android SDK is very Java =
oriented, and it just feels awkward as hell to use in OCaml even if you wer=
e to write a thin wrapper around the SDK.
>=20
> In theory, you are right that it wouldn't be hard.
> In practice, the problem is that OCaml-Java emits classes
> for Java 1.7 while (to the best of my knowledge) Android
> only accepts Java 1.6 classes. As far as I know, there is no
> other pending problem.
>=20
> From this point, the question would be: is it better to wait
> for Android to update to Java 1.7 (or even 1.8...), or to
> modify OCaml-Java? Honestly, I would need quite a bit
> of encouragement to modify OCaml-Java in this direction...
>=20
>=20
> Yes, that would be a deal breaker.  That fell under the technical points =
of ocaml-java with which I wasn't familiar.
>=20
> Regarding interaction with the classes of the Android SDK,
> one may be interested in the typer extension allowing to
> manipulate Java instances from pure OCaml code:
>     http://ocamljava.x9c.fr/preview/javaext.html
> The main potential problem with this approach is that the
> extension currently allows only to implement interfaces, but
> not to extend classes. It may be a problem if for example the
> event system of Android is based on abstract classes.
> Another problem may be the "linking", i. e. the way Android
> expects to execute an application: is it a bare main method,
> or is there a need to implement/extend a given interface/class?
>=20
> Yes, it does rely on extending an abstract class.  This does, in fact, pe=
rmeate the framework.

This problem is indeed to be fixed in a future version of OCaml-Java.
Currently, you can extend an abstract class only in well delimited
circumstances, for example to build an applet.


Xavier Clerc

