Received: (from weis@localhost) by pauillac.inria.fr (8.7.6/8.7.3) id OAA10599 for caml-redistribution; Mon, 15 Mar 1999 14:33:42 +0100 (MET)
Received: from nez-perce.inria.fr (nez-perce.inria.fr [192.93.2.78]) by pauillac.inria.fr (8.7.6/8.7.3) with ESMTP id OAA30629 for <caml-list@pauillac.inria.fr>; Sat, 13 Mar 1999 14:43:45 +0100 (MET)
Received: from post.tepkom.ru (relay.tepkom.ru [195.9.240.162])
	by nez-perce.inria.fr (8.8.7/8.8.7) with ESMTP id OAA24302;
	Sat, 13 Mar 1999 14:43:42 +0100 (MET)
Received: from localhost (msk@localhost)
	by post.tepkom.ru (8.8.7/8.8.7) with ESMTP id QAA07769;
	Sat, 13 Mar 1999 16:40:26 +0300
Date: Sat, 13 Mar 1999 16:40:26 +0300 (MSK)
From: Anton Moscal <msk@post.tepkom.ru>
To: Alexey Nogin <nogin@cs.cornell.edu>
cc: Xavier Leroy <Xavier.Leroy@inria.fr>, caml-list@inria.fr,
        Jason Hickey <jyh@cs.cornell.edu>,
        Alexei Kopylov <kopylov@cs.cornell.edu>,
        Paul Stodghill <stodghil@cs.cornell.edu>
Subject: Re: Upgrade from OCaml 2.01 to OCaml 2.02 made things _slower_!
In-Reply-To: <36E858F5.8FAF2CF9@CS.Cornell.EDU>
Message-ID: <Pine.LNX.4.03.9903131639010.7348-101000@post.tepkom.ru>
MIME-Version: 1.0
Sender: weis
Content-Type: multipart/mixed;
  boundary="On Thu, 11 Mar 1999, Alexey Nogin wrote:"

On Thu, 11 Mar 1999, Alexey Nogin wrote:

Sorry, I forgot attach patch in my first message.

> > pressure locally, causing other stuff to be spilled on the stack,
> > though.
> 
> Well, in this case I should probably try to remove the allocation coalescing
> and see what happens. Am I right assuming that in order to do that I have to
> revert changes for versions 1.8 -> 1.9 and 1.10 -> 1.11 of the
> asmcomp/selectgen.ml?
> 
Also you can try to apply this patch (attached to this message) to
asmcomp/selectgen.ml: this is another variant of allocation combiner.
Code, generated by this patch, is more close to code generated by the
ocaml-2.01 than the code from official ocaml-2.02 (Warning: I tested it
only on my own programs and on the Ocaml bootstrapping).

Regards,
Anton E.Moscal

Content-Type: APPLICATION/x-gunzip; name="selectgen.patch.gz"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.03.9903131640260.7348@post.tepkom.ru>
Content-Description: 
Content-Disposition: attachment; filename="selectgen.patch.gz"

H4sICBSA6TYAA3NlbGVjdGdlbi5wYXRjaACtV19v2zYQf44/xaF7mFTZXpw4
c+PUXYo+GUOLYdlbUQi0RMdEJcoj6bRuku++uyNlS7aSDMMMJJLIu9/95d1x
MBhAlYmyGJwNT89+EbbMqnL9i5WFzNyt1MOyOPlrtYGPwgCMYTSenl5Oxxcw
ury87CVJ0mAeaPmtG+Bmoz3AhADGF9PTcw9wfQ2D84tJfzSGhJ6/wvV1D+gn
CytBfndGZA4ipa0zaVZpC2qYS5vhQ5hb/G+kBfyL8VUjOShN/DtGqfOUmaMY
SRjFyr970BtEr+G9kfBN0rLKJQhAxRdKyxxEUaBZTlX6N3gd9wa9wZ0ooNw4
sSik302tE07CDKJPlZYwhehPeTt0IIwRW3iNoC6Gak0YDIDiiHAKuuqS0xug
1jdVKSPTBx1PQQpTKGkaJFDIpSNbNwWZiW+3yjok+Wy+9JkfINsYI7WDarm0
kqkCPwpb4MtXUBY+6y9DbxagVnNtpUG9Af2ykTqTyAxldYd+XZqqBLJubeUm
r1AgEKqrQOjKraRhGOhBKd2qysmRCJUSM1iTQW4dzDjG4zeT/vkZJOPJZX+0
D7L/Yaosf/K8EM2rdTTH8GWoeFQsir63IMbwkdcp6PREN1w9gcHyU+8nWxOD
yQEjln1Nq2Wb0+S9pP5+gDlLgxQG75pEf5gqG2L6OYEyUtLNwnQGzmxkC6xA
96CkGVAyZEai4+/AbdepyHMTcrNJa9UPyiF6pPL72oDUdxB9cJs15hkeJ7KX
cluH+PJvgYHXUAqXrVq5+E25VZMOOOPIktail+wqJ4o0yA8o9OEVwCB84MX+
XotDNbpD5/23R0e2zw8PX9ArV4fMTd3fDkL25332RnxEzaJkqRxyVBRR0rRW
jpy+kiKXhj0trVX69iWB5J0jGkyHxspD0Cr4AnMn7vCnWgZH2FSVpcwVCUBa
wDNy5DIkv9VoQNRM2WqN7sOSUa0JAb2Y515aDF426hUfInGJ5GQ4lsGJ2JGH
KKMjjE/rRCXXEVf0CYvQncS3oS8LrJwP7XGwXjASyMAje576Re+ppg7Feo3V
fOePuNMl+l+m2T6gkPy3hGOEF01A3bPV0JfjRmoeJys79IVsROt6yYGCHYfv
8Ngdsjx3iJrET2vPy9gztVNu29yIBrzF9Yw6YNyS3i61mAbtIss5O6JyuNPS
F8KWksdFtKPgEhX1ncn5GGeKZDI67Y/fhLZjA7RQBSNj3b0K635qwI6WYGP0
XZqs2vdgEg8LYVXm26kFHJ8+3vxOfTAhU0MnXBt1R/kWOn3KCNhQUVHvENZb
ZjXBKfDwMqu/IVriyMQFWfmtwTu4V1zigeefGcz5PDVCflWD0OMx9l9enMCD
Q78aPnPYjXbKeHWitwmWeIgIq8/MMY03/hNLXBiwZh6faxuScxGqNaONWZCO
EQjgvlOFuY2bVNh4OJlnvBepEYo4i7usDBScEwfuJK7O9bP4Ed4me+d61Rti
ndmykOcE72j+X9EWQckgnG0sYrjS2U7xbTpfAkux7pTqUV4QrJYUMo5XhKXP
9UF2Cj6g65LnupflSyoUFebsosq3XXJ5s9PZxPE8dOswaDarl5yEvG4n9O6E
MQEAHbQU1M+7YxbWAe7r84QrJ/dEwvrSFzSP2lVYap3LXTOH0M01F0Oioxl2
hnB0d6GVR15vcM9pguXFQApDnndxgWp2zcsLBTblUP5upBvKcu22OwseT4ik
cTfaeyVMfjq0v91e8BYViEb5iQPkocPDoA7Rq7LK1XL7qg9pzO5XjXD5cjMM
9agLCAcNhMGWkdOKf0fXpUywE5J6dGGxd/AcRliqMy86hKTPqNWgpBkDCaNT
LAzxfv2Iu52DdbXjhEM9+Uo629MudxQcdL553fCFyylRqB/+hoc3L0EJmfFX
LpfYf/i1dc3i9oVUucwKaim+012c9SfY6San+AiNbt9G6163HH4oyyHypnSm
uO3dk8BUi5LSYb9PC+FqQ5/cemf1FSzMKTXOrmX7/hl6/uHuYc1qcewELQVd
GhuK8MIjmU/jzz+IfRi5rxAAAA==


