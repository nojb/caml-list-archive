Return-Path: <christophe.raffalli@univ-savoie.fr>
X-Original-To: caml-list@sympa.inria.fr
Delivered-To: caml-list@sympa.inria.fr
Received: from mail4-relais-sop.national.inria.fr (mail4-relais-sop.national.inria.fr [192.134.164.105])
	by sympa.inria.fr (Postfix) with ESMTPS id C47A47EE1A
	for <caml-list@sympa.inria.fr>; Fri, 30 Nov 2012 13:50:03 +0100 (CET)
Received-SPF: None (mail4-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  christophe.raffalli@univ-savoie.fr) identity=pra;
  client-ip=193.48.126.73;
  receiver=mail4-smtp-sop.national.inria.fr;
  envelope-from="christophe.raffalli@univ-savoie.fr";
  x-sender="christophe.raffalli@univ-savoie.fr";
  x-conformance=sidf_compatible
Received-SPF: Pass (mail4-smtp-sop.national.inria.fr: domain of
  christophe.raffalli@univ-savoie.fr designates 193.48.126.73
  as permitted sender) identity=mailfrom;
  client-ip=193.48.126.73;
  receiver=mail4-smtp-sop.national.inria.fr;
  envelope-from="christophe.raffalli@univ-savoie.fr";
  x-sender="christophe.raffalli@univ-savoie.fr";
  x-conformance=sidf_compatible; x-record-type="v=spf1"
Received-SPF: None (mail4-smtp-sop.national.inria.fr: no sender
  authenticity information available from domain of
  postmaster@dsi-mta-out.univ-savoie.fr) identity=helo;
  client-ip=193.48.126.73;
  receiver=mail4-smtp-sop.national.inria.fr;
  envelope-from="christophe.raffalli@univ-savoie.fr";
  x-sender="postmaster@dsi-mta-out.univ-savoie.fr";
  x-conformance=sidf_compatible
X-IronPort-Anti-Spam-Filtered: true
X-IronPort-Anti-Spam-Result: As8AAOaquFDBMH5JmWdsb2JhbABEFoYWuWIWDgEBAQEBCAsLBxQngh8BBSMmLxEsFgsCAgkDAgECAUUTBgIBAYgQCKxkknqMW3+CFIETA45+gSGGfYRPjUyBaw
X-IronPort-AV: E=Sophos;i="4.84,191,1355094000"; 
   d="asc'?scan'208";a="164304080"
Received: from dsi-mta-out.univ-savoie.fr ([193.48.126.73])
  by mail4-smtp-sop.national.inria.fr with ESMTP; 30 Nov 2012 13:50:03 +0100
Received: from localhost (localhost [127.0.0.1])
	by dsi-mta-out.univ-savoie.fr (Postfix) with ESMTP id D6CE53006B
	for <caml-list@inria.fr>; Fri, 30 Nov 2012 13:50:02 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at dsi-a177.univ-savoie.fr
Received: from dsi-mta-out.univ-savoie.fr ([127.0.0.1])
	by localhost (dsi-mta-out.univ-savoie.fr [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id syvUVAKeFWw5 for <caml-list@inria.fr>;
	Fri, 30 Nov 2012 13:50:02 +0100 (CET)
Received: from dsi-mail-msa1.univ-savoie.fr (dsi-mail-msa1.univ-savoie.fr [193.48.126.83])
	by dsi-mta-out.univ-savoie.fr (Postfix) with ESMTP id C283C30065
	for <caml-list@inria.fr>; Fri, 30 Nov 2012 13:50:02 +0100 (CET)
Received: from localhost (localhost [127.0.0.1])
	by dsi-mail-msa1.univ-savoie.fr (Postfix) with ESMTP id BDEDB1C078;
	Fri, 30 Nov 2012 13:50:02 +0100 (CET)
X-Virus-Scanned: Debian amavisd-new at dsi-mail-msa1
Received: from dsi-mail-msa1.univ-savoie.fr ([127.0.0.1])
	by localhost (dsi-mail-msa1.univ-savoie.fr [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id YZ95LjZFiK9g; Fri, 30 Nov 2012 13:50:02 +0100 (CET)
Received: from [193.48.123.45] (d45.lama.univ-savoie.fr [193.48.123.45])
	by dsi-mail-msa1.univ-savoie.fr (Postfix) with ESMTPS id A88971C076;
	Fri, 30 Nov 2012 13:50:02 +0100 (CET)
Message-ID: <50B8AB75.5030508@univ-savoie.fr>
Date: Fri, 30 Nov 2012 13:49:57 +0100
From: Christophe Raffalli <christophe.raffalli@univ-savoie.fr>
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:16.0) Gecko/20121028 Thunderbird/16.0.2
MIME-Version: 1.0
To: caml-list@inria.fr
References: <87625rhu04.fsf@golf.niidar.ru> <CA+LkvyrPzuOo5dMnOHDzn1zWg6Lya9k6Ym6Wz6qJQQLYq6q6ZA@mail.gmail.com>
In-Reply-To: <CA+LkvyrPzuOo5dMnOHDzn1zWg6Lya9k6Ym6Wz6qJQQLYq6q6ZA@mail.gmail.com>
X-Enigmail-Version: 1.4.5
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig9B498CACAB9E6B532B6DB560"
X-Validation-by: christophe.raffalli@univ-savoie.fr
Subject: [Caml-list] ocamlc, ocamlopt stackoverflow on list

This is an OpenPGP/MIME signed message (RFC 2440 and 3156)
--------------enig9B498CACAB9E6B532B6DB560
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable


Hello,

On my machine (ocaml 3.12.1 on linux 64 bits) with unlimited stack,
ocamlc and ocamlopt fails to compile a list constant of length 30000
which is a problem in code generated by another program.

Should this be considered a bug ?

Here is how to reproduce with grandelist.ml give below:

raffalli@d45-lama:~/Caml/patoline$ ocaml grandeliste.ml > foo.ml
raffalli@d45-lama:~/Caml/patoline$ ocamlc -c foo.ml
Fatal error: exception Stack_overflow
raffalli@d45-lama:~/Caml/patoline$ ocamlopt -c foo.ml
Fatal error: exception Stack_overflow

----------------- grandeliste.ml --------------------
open Printf

let _ =3D
  printf "let l =3D [";
  for i =3D 0 to 30000 do
    printf "%d;\n" i
  done;
  printf "0]"
----------------- grandeliste.ml --------------------

--=20
Christophe Raffalli
Universite de Savoie
Batiment Le Chablais, bureau 21
73376 Le Bourget-du-Lac Cedex

tel: (33) 4 79 75 81 03
fax: (33) 4 79 75 87 42
mail: Christophe.Raffalli@univ-savoie.fr
www: http://www.lama.univ-savoie.fr/~RAFFALLI
---------------------------------------------
IMPORTANT: this mail is signed using PGP/MIME
At least Enigmail/Mozilla, mutt or evolution
can check this signature. The public key is
stored on www.keyserver.net
---------------------------------------------


--------------enig9B498CACAB9E6B532B6DB560
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://www.enigmail.net/

iEYEARECAAYFAlC4q3oACgkQi9jr/RgYAS5yVgCbBkOHR+Jk+/YvG5XRSIfke+z6
LtEAnA0ottnHONR9J3U2A8T5obr1+tVR
=/dsi
-----END PGP SIGNATURE-----

--------------enig9B498CACAB9E6B532B6DB560--
