Received: (from majordomo@localhost) by pauillac.inria.fr (8.7.6/8.7.3) id TAA12708; Mon, 19 Aug 2002 19:03:07 +0200 (MET DST)
Received: from concorde.inria.fr (concorde.inria.fr [192.93.2.39]) by pauillac.inria.fr (8.7.6/8.7.3) with ESMTP id TAA13210 for <caml-list@pauillac.inria.fr>; Mon, 19 Aug 2002 19:03:07 +0200 (MET DST)
Received: from venus.is.s.u-tokyo.ac.jp (venus.is.s.u-tokyo.ac.jp [133.11.12.9])
	by concorde.inria.fr (8.11.1/8.11.1) with ESMTP id g7JH35T18181
	for <caml-list@inria.fr>; Mon, 19 Aug 2002 19:03:05 +0200 (MET DST)
Received: from tuba.is.s.u-tokyo.ac.jp (tuba.is.s.u-tokyo.ac.jp [133.11.12.102])
	by venus.is.s.u-tokyo.ac.jp (8.11.6/3.7W) with ESMTP id g7JH33400776
	for <caml-list@inria.fr>; Tue, 20 Aug 2002 02:03:03 +0900 (JST)
Received: (from oiwa@localhost)
	by tuba.is.s.u-tokyo.ac.jp (8.11.6+Sun/3.7W) id g7JH33909559;
	Tue, 20 Aug 2002 02:03:03 +0900 (JST)
X-Authentication-Warning: tuba.is.s.u-tokyo.ac.jp: oiwa set sender to oiwa@yl.is.s.u-tokyo.ac.jp using -f
To: caml-list@inria.fr
Subject: Re: PCRE on Win32-VC (Re: [Caml-list] compiling PXP , OCAMLNET AND PCRE to win32)
Reply-To: caml-list@inria.fr
References: <OE59EFYamNfN1Xh2RtD000106b8@hotmail.com>
	<20020817142803.GA996@ice.gerd-stolpmann.de>
	<vfi8z35jvlu.fsf_-_@tuba.is.s.u-tokyo.ac.jp>
From: Yutaka OIWA <oiwa@yl.is.s.u-tokyo.ac.jp>
Date: 20 Aug 2002 02:03:02 +0900
In-Reply-To: Yutaka OIWA's message of "18 Aug 2002 01:30:53 +0900"
Message-ID: <vfi4rdqwzll.fsf@tuba.is.s.u-tokyo.ac.jp>
Lines: 53
User-Agent: Gnus/5.0807 (Gnus v5.8.7) Emacs/20.7
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Sender: owner-caml-list@pauillac.inria.fr
Precedence: bulk

I've created a (possibly incomplete) binary snapshot of 
the pcre-ocaml-4.28.2 for Win32-MSVC, because there is a request for it.

http://www.yl.is.s.u-tokyo.ac.jp/~oiwa/pub/caml/pcre-ocaml-4.28.2-windows.tar.gz

* Known problem:

Currently, MSVC's LINK warns about some import symbol problems.
I did not find the reason yet (I'm not a Win32 expert.)

* To Use A Binary:

  Copy pcre.lib to somewhere the MSVC linker searches for libraries (or simply in ".").
  Place libpcre-stubs.lib and other ocaml-related files to some directory and
  pass an appropriate -I options to ocamlc/ocamlopt.
  I have only tested it with -threads option.

  If you want to place the file pcre.lib to somewhere outside default MSVC
  search path, pass options "--ccopt /LINK --ccopt /LIBPATH:somewhere" to ocamlc.

* Build From Sources:

Note:
Those files are just picked up by hand from my working directory.
So some required files may be missing, or some files may not be useful.
I have actually not tried the following "stand-alone" build process.
Sorry, but please hack it if it does not work well ;-)

  Source file archives for PCRE-3.9 and pcre-ocaml-4.28.2 are needed.

  The files in the directory "pcre-files" are hand-written Makefile and
  hand-configured pcre header files.
  (on Unix platform, they are automatically generated by configure.)

  Untar pcre-3.9.tar.gz,
  modify my version of Makefile appropriately (include path),
  then use cygwin's make utility to build "pcre.lib" by command line
  "make -f path/to/my/Makefile" in the pcre-3.9 directory.

  Untar pcre-ocaml-4.28.2.tar.gz, then a command

  make all opt STATIC=yes CFLAGS=-Ipath/to/pcre-files LIBS= LIBDIRS= THREADS=yes CLIBS=pcre.lib

  (hopefully :-) builds pcre-ocaml library.
  Note that pcre-ocaml's build process makes the file named
  "pcre.lib". Obviously its content is pcre-ocaml, not PCRE-C.
  Please don't confuse those two files.

-- 
Yutaka Oiwa              Yonezawa Lab., Dept. of Computer Science,
      Graduate School of Information Sci. & Tech., Univ. of Tokyo.
      <oiwa@yl.is.s.u-tokyo.ac.jp>, <yutaka@oiwa.shibuya.tokyo.jp>
PGP fingerprint = C9 8D 5C B8 86 ED D8 07  EA 59 34 D8 F4 65 53 61
-------------------
To unsubscribe, mail caml-list-request@inria.fr Archives: http://caml.inria.fr
Bug reports: http://caml.inria.fr/bin/caml-bugs FAQ: http://caml.inria.fr/FAQ/
Beginner's list: http://groups.yahoo.com/group/ocaml_beginners

