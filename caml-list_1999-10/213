Received: (from weis@localhost) by pauillac.inria.fr (8.7.6/8.7.3) id TAA14937 for caml-redistribution; Thu, 28 Oct 1999 19:08:03 +0200 (MET DST)
Received: from concorde.inria.fr (concorde.inria.fr [192.93.2.39]) by pauillac.inria.fr (8.7.6/8.7.3) with ESMTP id TAA22791 for <caml-list@pauillac.inria.fr>; Tue, 26 Oct 1999 19:31:40 +0200 (MET DST)
Received: from pauillac.inria.fr (pauillac.inria.fr [128.93.11.35])
	by concorde.inria.fr (8.8.7/8.8.7) with ESMTP id TAA26224;
	Tue, 26 Oct 1999 19:31:37 +0200 (MET DST)
Received: (from xleroy@localhost) by pauillac.inria.fr (8.7.6/8.7.3) id TAA21961; Tue, 26 Oct 1999 19:31:36 +0200 (MET DST)
Message-ID: <19991026193136.02746@pauillac.inria.fr>
Date: Tue, 26 Oct 1999 19:31:36 +0200
From: Xavier Leroy <Xavier.Leroy@inria.fr>
To: Hongwei Xi <hwxi@ececs.uc.edu>, caml-list@inria.fr
Subject: Re: assembly
References: <Pine.LNX.4.04.9910241541200.12868-100000@decaml.ececs.uc.edu>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Mailer: Mutt 0.89.1
In-Reply-To: <Pine.LNX.4.04.9910241541200.12868-100000@decaml.ececs.uc.edu>; from Hongwei Xi on Sun, Oct 24, 1999 at 03:45:59PM -0400
Sender: weis

> Could someone tell me how to compile assembly code
> generated by ocamlopt?
> 
> I am doing some experiment. I have generated some
> assembly code using ocamlopt and modified it. Now
> I'd like to compile the modified code. What object
> files are needed for doing this?

If you run ocamlopt with the -verbose option, it will display all the
calls to the assembler and the linker that it performs.  In
particular, you'll see what assembler flags are used on your platform.

I'd guess that something like the below should work:

        ocamlopt -S -c foo.ml
        <transform foo.s>
        as <machine-dependent options> -o foo.o foo.s
        ocamlopt -o myprog foo.cmx

Hope this helps,

- Xavier Leroy



