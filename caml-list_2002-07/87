Received: (from majordomo@localhost) by pauillac.inria.fr (8.7.6/8.7.3) id RAA24906; Fri, 5 Jul 2002 17:54:23 +0200 (MET DST)
X-Authentication-Warning: pauillac.inria.fr: majordomo set sender to owner-caml-list@pauillac.inria.fr using -f
Received: from concorde.inria.fr (concorde.inria.fr [192.93.2.39]) by pauillac.inria.fr (8.7.6/8.7.3) with ESMTP id RAA24762 for <caml-list@pauillac.inria.fr>; Fri, 5 Jul 2002 17:54:22 +0200 (MET DST)
Received: from stephens.ittc.ku.edu (stephens.ittc.ku.edu [129.237.125.220])
	by concorde.inria.fr (8.11.1/8.11.1) with ESMTP id g65FsLf02870
	for <caml-list@inria.fr>; Fri, 5 Jul 2002 17:54:21 +0200 (MET DST)
Received: from astro.ittc.ku.edu (astro.ittc.ku.edu [129.237.126.119])
	by stephens.ittc.ku.edu (8.11.2/8.11.2/ITTC-NOSPAM-NOVIRUS-2.2) with ESMTP id g65FsK028574
	for <caml-list@inria.fr>; Fri, 5 Jul 2002 10:54:20 -0500
Received: from localhost by astro.ittc.ku.edu (8.9.3/KU-4.0-client)
	id KAA00999; Fri, 5 Jul 2002 10:54:20 -0500
Date: Fri, 5 Jul 2002 10:54:20 -0500 (CDT)
From: Sandeep Subramaniam <sandeeps@ittc.ku.edu>
To: caml-list@inria.fr
Subject: [Caml-list] reg : camlidl_malloc
Message-ID: <Pine.LNX.4.10.10207051044440.988-100000@astro.ittc.ku.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
Sender: owner-caml-list@pauillac.inria.fr
Precedence: bulk


Hi,

I am using camlidl-1.04 and ocaml-3.04 on Linux.

Following is a section of code generated by camlidl which invokes the 
function camlidl_malloc() declared in caml/camlruntime.h 

value camlidl_test1_write_mark_table(
	value _v_mark,
	value _v_num)
{
  struct marks *mark; /*in*/
  int num; /*in*/
  mlsize_t _c1;
  mlsize_t _c2;
  value _v3;
  struct camlidl_ctx_struct _ctxs = { CAMLIDL_TRANSIENT, NULL };
  camlidl_ctx _ctx = &_ctxs;
  _c1 = Wosize_val(_v_mark);
  mark = camlidl_malloc(_c1 * sizeof(struct marks ), _ctx);
  for (_c2 = 0; _c2 < _c1; _c2++) {
    _v3 = Field(_v_mark, _c2);
    camlidl_ml2c_test1_struct_marks(_v3, &mark[_c2], _ctx);
  }
  num = Int_val(_v_num);
  write_mark_table(mark, num);
  camlidl_free(_ctx);
  return Val_unit;
}

The C file containing this code is compiled into a shared object (.so
file)

But when dynamically linking this C code with Caml code I get the error :

"Error on dynamically loaded library: ./test1_stubs.so: undefined symbol:
camlidl_malloc"

It seems that camlidl_malloc() is declared in camlidlruntime.h but not
defined .

So how do I solve this error ?

Thanx,
Sandeep.




Sandeep Subramaniam

Graduate Research Assistant
ITTC, Raymond Nichols Hall,
University of Kansas



-------------------
To unsubscribe, mail caml-list-request@inria.fr Archives: http://caml.inria.fr
Bug reports: http://caml.inria.fr/bin/caml-bugs FAQ: http://caml.inria.fr/FAQ/
Beginner's list: http://groups.yahoo.com/group/ocaml_beginners

